{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport classnames from 'classnames';\nimport classes from 'component-classes';\nimport Animate from 'rc-animate';\nimport { Item as MenuItem, ItemGroup as MenuItemGroup } from 'rc-menu';\nimport childrenToArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport warning from 'warning';\nimport Option from './Option'; // Where el is the DOM element you'd like to test for visibility\n\nfunction isHidden(node) {\n  return !node || node.offsetParent === null;\n}\n\nimport SelectPropTypes from './PropTypes';\nimport SelectTrigger from './SelectTrigger';\nimport { defaultFilterFn, findFirstMenuItem, findIndexInValueBySingleValue, generateUUID, getLabelFromPropsValue, getMapKey, getPropValue, getValuePropValue, includesSeparators, isCombobox, isMultipleOrTags, isMultipleOrTagsOrCombobox, isSingleMode, preventDefaultEvent, saveRef, splitBySeparators, toArray, toTitle, UNSELECTABLE_ATTRIBUTE, UNSELECTABLE_STYLE, validateOptionValue } from './util';\nvar SELECT_EMPTY_VALUE_KEY = 'RC_SELECT_EMPTY_VALUE_KEY';\n\nvar noop = function noop() {\n  return null;\n};\n\nfunction chaining() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    } // tslint:disable-next-line:prefer-for-of\n\n\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i] && typeof fns[i] === 'function') {\n        fns[i].apply(chaining, args);\n      }\n    }\n  };\n}\n\nvar Select = /*#__PURE__*/function (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n    _this.inputRef = null;\n    _this.inputMirrorRef = null;\n    _this.topCtrlRef = null;\n    _this.selectTriggerRef = null;\n    _this.rootRef = null;\n    _this.selectionRef = null;\n    _this.dropdownContainer = null;\n    _this.blurTimer = null;\n    _this.focusTimer = null;\n    _this.comboboxTimer = null; // tslint:disable-next-line:variable-name\n\n    _this._focused = false; // tslint:disable-next-line:variable-name\n\n    _this._mouseDown = false; // tslint:disable-next-line:variable-name\n\n    _this._options = []; // tslint:disable-next-line:variable-name\n\n    _this._empty = false;\n\n    _this.onInputChange = function (event) {\n      var tokenSeparators = _this.props.tokenSeparators;\n      var val = event.target.value;\n\n      if (isMultipleOrTags(_this.props) && tokenSeparators.length && includesSeparators(val, tokenSeparators)) {\n        var nextValue = _this.getValueByInput(val);\n\n        if (nextValue !== undefined) {\n          _this.fireChange(nextValue);\n        }\n\n        _this.setOpenState(false, {\n          needFocus: true\n        });\n\n        _this.setInputValue('', false);\n\n        return;\n      }\n\n      _this.setInputValue(val);\n\n      _this.setState({\n        open: true\n      });\n\n      if (isCombobox(_this.props)) {\n        _this.fireChange([val]);\n      }\n    };\n\n    _this.onDropdownVisibleChange = function (open) {\n      if (open && !_this._focused) {\n        _this.clearBlurTime();\n\n        _this.timeoutFocus();\n\n        _this._focused = true;\n\n        _this.updateFocusClassName();\n      }\n\n      _this.setOpenState(open);\n    }; // combobox ignore\n\n\n    _this.onKeyDown = function (event) {\n      var open = _this.state.open;\n      var disabled = _this.props.disabled;\n\n      if (disabled) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n\n      if (open && !_this.getInputDOMNode()) {\n        _this.onInputKeyDown(event);\n      } else if (keyCode === KeyCode.ENTER || keyCode === KeyCode.DOWN) {\n        if (!open) {\n          _this.setOpenState(true);\n        }\n\n        event.preventDefault();\n      } else if (keyCode === KeyCode.SPACE) {\n        // Not block space if popup is shown\n        if (!open) {\n          _this.setOpenState(true);\n\n          event.preventDefault();\n        }\n      }\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          combobox = _this$props.combobox,\n          defaultActiveFirstOption = _this$props.defaultActiveFirstOption;\n\n      if (disabled) {\n        return;\n      }\n\n      var state = _this.state;\n\n      var isRealOpen = _this.getRealOpenState(state); // magic code\n\n\n      var keyCode = event.keyCode;\n\n      if (isMultipleOrTags(_this.props) && !event.target.value && keyCode === KeyCode.BACKSPACE) {\n        event.preventDefault();\n        var value = state.value;\n\n        if (value.length) {\n          _this.removeSelected(value[value.length - 1]);\n        }\n\n        return;\n      }\n\n      if (keyCode === KeyCode.DOWN) {\n        if (!state.open) {\n          _this.openIfHasChildren();\n\n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        }\n      } else if (keyCode === KeyCode.ENTER && state.open) {\n        // Aviod trigger form submit when select item\n        // https://github.com/ant-design/ant-design/issues/10861\n        // https://github.com/ant-design/ant-design/issues/14544\n        if (isRealOpen || !combobox) {\n          event.preventDefault();\n        } // Hard close popup to avoid lock of non option in combobox mode\n\n\n        if (isRealOpen && combobox && defaultActiveFirstOption === false) {\n          _this.comboboxTimer = setTimeout(function () {\n            _this.setOpenState(false);\n          });\n        }\n      } else if (keyCode === KeyCode.ESC) {\n        if (state.open) {\n          _this.setOpenState(false);\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        return;\n      }\n\n      if (isRealOpen && _this.selectTriggerRef) {\n        var menu = _this.selectTriggerRef.getInnerMenu();\n\n        if (menu && menu.onKeyDown(event, _this.handleBackfill)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    };\n\n    _this.onMenuSelect = function (_ref) {\n      var item = _ref.item;\n\n      if (!item) {\n        return;\n      }\n\n      var value = _this.state.value;\n      var props = _this.props;\n      var selectedValue = getValuePropValue(item);\n      var lastValue = value[value.length - 1];\n      var skipTrigger = false;\n\n      if (isMultipleOrTags(props)) {\n        if (findIndexInValueBySingleValue(value, selectedValue) !== -1) {\n          skipTrigger = true;\n        } else {\n          value = value.concat([selectedValue]);\n        }\n      } else {\n        if (!isCombobox(props) && lastValue !== undefined && lastValue === selectedValue && selectedValue !== _this.state.backfillValue) {\n          _this.setOpenState(false, {\n            needFocus: true,\n            fireSearch: false\n          });\n\n          skipTrigger = true;\n        } else {\n          value = [selectedValue];\n\n          _this.setOpenState(false, {\n            needFocus: true,\n            fireSearch: false\n          });\n        }\n      }\n\n      if (!skipTrigger) {\n        _this.fireChange(value);\n      }\n\n      _this.fireSelect(selectedValue);\n\n      if (!skipTrigger) {\n        var inputValue = isCombobox(props) ? getPropValue(item, props.optionLabelProp) : '';\n\n        if (props.autoClearSearchValue) {\n          _this.setInputValue(inputValue, false);\n        }\n      }\n    };\n\n    _this.onMenuDeselect = function (_ref2) {\n      var item = _ref2.item,\n          domEvent = _ref2.domEvent;\n\n      if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode.ENTER) {\n        var menuItemDomNode = ReactDOM.findDOMNode(item); // https://github.com/ant-design/ant-design/issues/20465#issuecomment-569033796\n\n        if (!isHidden(menuItemDomNode)) {\n          _this.removeSelected(getValuePropValue(item));\n        }\n\n        return;\n      }\n\n      if (domEvent.type === 'click') {\n        _this.removeSelected(getValuePropValue(item));\n      }\n\n      var props = _this.props;\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue('');\n      }\n    };\n\n    _this.onArrowClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (!_this.props.disabled) {\n        _this.setOpenState(!_this.state.open, {\n          needFocus: !_this.state.open\n        });\n      }\n    };\n\n    _this.onPlaceholderClick = function () {\n      if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n        _this.getInputDOMNode().focus();\n      }\n    };\n\n    _this.onOuterFocus = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.clearBlurTime(); // In IE11, onOuterFocus will be trigger twice when focus input\n      // First one: e.target is div\n      // Second one: e.target is input\n      // other browser only trigger second one\n      // https://github.com/ant-design/ant-design/issues/15942\n      // Here we ignore the first one when e.target is div\n\n\n      var inputNode = _this.getInputDOMNode();\n\n      if (inputNode && e.target === _this.rootRef) {\n        return;\n      }\n\n      if (!isMultipleOrTagsOrCombobox(_this.props) && e.target === inputNode) {\n        return;\n      }\n\n      if (_this._focused) {\n        return;\n      }\n\n      _this._focused = true;\n\n      _this.updateFocusClassName(); // only effect multiple or tag mode\n\n\n      if (!isMultipleOrTags(_this.props) || !_this._mouseDown) {\n        _this.timeoutFocus();\n      }\n    };\n\n    _this.onPopupFocus = function () {\n      // fix ie scrollbar, focus element again\n      _this.maybeFocus(true, true);\n    };\n\n    _this.onOuterBlur = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.blurTimer = window.setTimeout(function () {\n        _this._focused = false;\n\n        _this.updateFocusClassName();\n\n        var props = _this.props;\n        var value = _this.state.value;\n        var inputValue = _this.state.inputValue;\n\n        if (isSingleMode(props) && props.showSearch && inputValue && props.defaultActiveFirstOption) {\n          var options = _this._options || [];\n\n          if (options.length) {\n            var firstOption = findFirstMenuItem(options);\n\n            if (firstOption) {\n              value = [getValuePropValue(firstOption)];\n\n              _this.fireChange(value);\n            }\n          }\n        } else if (isMultipleOrTags(props) && inputValue) {\n          if (_this._mouseDown) {\n            // need update dropmenu when not blur\n            _this.setInputValue('');\n          } else {\n            // why not use setState?\n            // https://github.com/ant-design/ant-design/issues/14262\n            _this.state.inputValue = '';\n\n            if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n              _this.getInputDOMNode().value = '';\n            }\n          }\n\n          var tmpValue = _this.getValueByInput(inputValue);\n\n          if (tmpValue !== undefined) {\n            value = tmpValue;\n\n            _this.fireChange(value);\n          }\n        } // if click the rest space of Select in multiple mode\n\n\n        if (isMultipleOrTags(props) && _this._mouseDown) {\n          _this.maybeFocus(true, true);\n\n          _this._mouseDown = false;\n          return;\n        }\n\n        _this.setOpenState(false);\n\n        if (props.onBlur) {\n          props.onBlur(_this.getVLForOnChange(value));\n        }\n      }, 10);\n    };\n\n    _this.onClearSelection = function (event) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (props.disabled) {\n        return;\n      }\n\n      var inputValue = state.inputValue;\n      var value = state.value;\n      event.stopPropagation();\n\n      if (inputValue || value.length) {\n        if (value.length) {\n          _this.fireChange([]);\n        }\n\n        _this.setOpenState(false, {\n          needFocus: true\n        });\n\n        if (inputValue) {\n          _this.setInputValue('');\n        }\n      }\n    };\n\n    _this.onChoiceAnimationLeave = function () {\n      _this.forcePopupAlign();\n    };\n\n    _this.getOptionInfoBySingleValue = function (value, optionsInfo) {\n      var info;\n      optionsInfo = optionsInfo || _this.state.optionsInfo;\n\n      if (optionsInfo[getMapKey(value)]) {\n        info = optionsInfo[getMapKey(value)];\n      }\n\n      if (info) {\n        return info;\n      }\n\n      var defaultLabel = value;\n\n      if (_this.props.labelInValue) {\n        var valueLabel = getLabelFromPropsValue(_this.props.value, value);\n        var defaultValueLabel = getLabelFromPropsValue(_this.props.defaultValue, value);\n\n        if (valueLabel !== undefined) {\n          defaultLabel = valueLabel;\n        } else if (defaultValueLabel !== undefined) {\n          defaultLabel = defaultValueLabel;\n        }\n      }\n\n      var defaultInfo = {\n        option: React.createElement(Option, {\n          value: value,\n          key: value\n        }, value),\n        value: value,\n        label: defaultLabel\n      };\n      return defaultInfo;\n    };\n\n    _this.getOptionBySingleValue = function (value) {\n      var _this$getOptionInfoBy = _this.getOptionInfoBySingleValue(value),\n          option = _this$getOptionInfoBy.option;\n\n      return option;\n    };\n\n    _this.getOptionsBySingleValue = function (values) {\n      return values.map(function (value) {\n        return _this.getOptionBySingleValue(value);\n      });\n    };\n\n    _this.getValueByLabel = function (label) {\n      if (label === undefined) {\n        return null;\n      }\n\n      var value = null;\n      Object.keys(_this.state.optionsInfo).forEach(function (key) {\n        var info = _this.state.optionsInfo[key];\n        var disabled = info.disabled;\n\n        if (disabled) {\n          return;\n        }\n\n        var oldLable = toArray(info.label);\n\n        if (oldLable && oldLable.join('') === label) {\n          value = info.value;\n        }\n      });\n      return value;\n    };\n\n    _this.getVLBySingleValue = function (value) {\n      if (_this.props.labelInValue) {\n        return {\n          key: value,\n          label: _this.getLabelBySingleValue(value)\n        };\n      }\n\n      return value;\n    };\n\n    _this.getVLForOnChange = function (vlsS) {\n      var vls = vlsS;\n\n      if (vls !== undefined) {\n        if (!_this.props.labelInValue) {\n          vls = vls.map(function (v) {\n            return v;\n          });\n        } else {\n          vls = vls.map(function (vl) {\n            return {\n              key: vl,\n              label: _this.getLabelBySingleValue(vl)\n            };\n          });\n        }\n\n        return isMultipleOrTags(_this.props) ? vls : vls[0];\n      }\n\n      return vls;\n    };\n\n    _this.getLabelBySingleValue = function (value, optionsInfo) {\n      var _this$getOptionInfoBy2 = _this.getOptionInfoBySingleValue(value, optionsInfo),\n          label = _this$getOptionInfoBy2.label;\n\n      return label;\n    };\n\n    _this.getDropdownContainer = function () {\n      if (!_this.dropdownContainer) {\n        _this.dropdownContainer = document.createElement('div');\n        document.body.appendChild(_this.dropdownContainer);\n      }\n\n      return _this.dropdownContainer;\n    };\n\n    _this.getPlaceholderElement = function () {\n      var props = _this.props;\n      var state = _this.state;\n      var hidden = false;\n\n      if (state.inputValue) {\n        hidden = true;\n      }\n\n      var value = state.value;\n\n      if (value.length) {\n        hidden = true;\n      }\n\n      if (isCombobox(props) && value.length === 1 && state.value && !state.value[0]) {\n        hidden = false;\n      }\n\n      var placeholder = props.placeholder;\n\n      if (placeholder) {\n        return React.createElement(\"div\", _extends({\n          onMouseDown: preventDefaultEvent,\n          style: _extends({\n            display: hidden ? 'none' : 'block'\n          }, UNSELECTABLE_STYLE)\n        }, UNSELECTABLE_ATTRIBUTE, {\n          onClick: _this.onPlaceholderClick,\n          className: \"\".concat(props.prefixCls, \"-selection__placeholder\")\n        }), placeholder);\n      }\n\n      return null;\n    };\n\n    _this.getInputElement = function () {\n      var props = _this.props;\n      var defaultInput = React.createElement(\"input\", {\n        id: props.id,\n        autoComplete: \"off\"\n      }); // tslint:disable-next-line:typedef-whitespace\n\n      var inputElement = props.getInputElement ? props.getInputElement() : defaultInput;\n      var inputCls = classnames(inputElement.props.className, _defineProperty({}, \"\".concat(props.prefixCls, \"-search__field\"), true)); // https://github.com/ant-design/ant-design/issues/4992#issuecomment-281542159\n      // Add space to the end of the inputValue as the width measurement tolerance\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(props.prefixCls, \"-search__field__wrap\")\n      }, React.cloneElement(inputElement, {\n        ref: _this.saveInputRef,\n        onChange: _this.onInputChange,\n        onKeyDown: chaining(_this.onInputKeyDown, inputElement.props.onKeyDown, _this.props.onInputKeyDown),\n        value: _this.state.inputValue,\n        disabled: props.disabled,\n        className: inputCls\n      }), React.createElement(\"span\", {\n        ref: _this.saveInputMirrorRef,\n        className: \"\".concat(props.prefixCls, \"-search__field__mirror\")\n      }, _this.state.inputValue, \"\\xA0\"));\n    };\n\n    _this.getInputDOMNode = function () {\n      return _this.topCtrlRef ? _this.topCtrlRef.querySelector('input,textarea,div[contentEditable]') : _this.inputRef;\n    };\n\n    _this.getInputMirrorDOMNode = function () {\n      return _this.inputMirrorRef;\n    };\n\n    _this.getPopupDOMNode = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getPopupDOMNode();\n      }\n    };\n\n    _this.getPopupMenuComponent = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getInnerMenu();\n      }\n    };\n\n    _this.setOpenState = function (open) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var needFocus = config.needFocus,\n          fireSearch = config.fireSearch;\n      var props = _this.props;\n      var state = _this.state;\n\n      if (state.open === open) {\n        _this.maybeFocus(open, !!needFocus);\n\n        return;\n      }\n\n      if (_this.props.onDropdownVisibleChange) {\n        _this.props.onDropdownVisibleChange(open);\n      }\n\n      var nextState = {\n        open: open,\n        backfillValue: ''\n      }; // clear search input value when open is false in singleMode.\n      // https://github.com/ant-design/ant-design/issues/16572\n\n      if (!open && isSingleMode(props) && props.showSearch) {\n        _this.setInputValue('', fireSearch);\n      }\n\n      if (!open) {\n        _this.maybeFocus(open, !!needFocus);\n      }\n\n      _this.setState(_extends({\n        open: open\n      }, nextState), function () {\n        if (open) {\n          _this.maybeFocus(open, !!needFocus);\n        }\n      });\n    };\n\n    _this.setInputValue = function (inputValue) {\n      var fireSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var onSearch = _this.props.onSearch;\n\n      if (inputValue !== _this.state.inputValue) {\n        _this.setState(function (prevState) {\n          // Additional check if `inputValue` changed in latest state.\n          if (fireSearch && inputValue !== prevState.inputValue && onSearch) {\n            onSearch(inputValue);\n          }\n\n          return {\n            inputValue: inputValue\n          };\n        }, _this.forcePopupAlign);\n      }\n    };\n\n    _this.getValueByInput = function (str) {\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          tokenSeparators = _this$props2.tokenSeparators;\n      var nextValue = _this.state.value;\n      var hasNewValue = false;\n      splitBySeparators(str, tokenSeparators).forEach(function (label) {\n        var selectedValue = [label];\n\n        if (multiple) {\n          var value = _this.getValueByLabel(label);\n\n          if (value && findIndexInValueBySingleValue(nextValue, value) === -1) {\n            nextValue = nextValue.concat(value);\n            hasNewValue = true;\n\n            _this.fireSelect(value);\n          }\n        } else if (findIndexInValueBySingleValue(nextValue, label) === -1) {\n          nextValue = nextValue.concat(selectedValue);\n          hasNewValue = true;\n\n          _this.fireSelect(label);\n        }\n      });\n      return hasNewValue ? nextValue : undefined;\n    };\n\n    _this.getRealOpenState = function (state) {\n      // tslint:disable-next-line:variable-name\n      var _open = _this.props.open;\n\n      if (typeof _open === 'boolean') {\n        return _open;\n      }\n\n      var open = (state || _this.state).open;\n      var options = _this._options || [];\n\n      if (isMultipleOrTagsOrCombobox(_this.props) || !_this.props.showSearch) {\n        if (open && !options.length) {\n          open = false;\n        }\n      }\n\n      return open;\n    };\n\n    _this.markMouseDown = function () {\n      _this._mouseDown = true;\n    };\n\n    _this.markMouseLeave = function () {\n      _this._mouseDown = false;\n    };\n\n    _this.handleBackfill = function (item) {\n      if (!_this.props.backfill || !(isSingleMode(_this.props) || isCombobox(_this.props))) {\n        return;\n      }\n\n      var key = getValuePropValue(item);\n\n      if (isCombobox(_this.props)) {\n        _this.setInputValue(key, false);\n      }\n\n      _this.setState({\n        value: [key],\n        backfillValue: key\n      });\n    };\n\n    _this.filterOption = function (input, child) {\n      var defaultFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultFilterFn;\n      var value = _this.state.value;\n      var lastValue = value[value.length - 1];\n\n      if (!input || lastValue && lastValue === _this.state.backfillValue) {\n        return true;\n      }\n\n      var filterFn = _this.props.filterOption;\n\n      if ('filterOption' in _this.props) {\n        if (filterFn === true) {\n          filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n        }\n      } else {\n        filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n      }\n\n      if (!filterFn) {\n        return true;\n      } else if (typeof filterFn === 'function') {\n        return filterFn.call(_assertThisInitialized(_this), input, child);\n      } else if (child.props.disabled) {\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.timeoutFocus = function () {\n      var onFocus = _this.props.onFocus;\n\n      if (_this.focusTimer) {\n        _this.clearFocusTime();\n      }\n\n      _this.focusTimer = window.setTimeout(function () {\n        if (onFocus) {\n          onFocus();\n        }\n      }, 10);\n    };\n\n    _this.clearFocusTime = function () {\n      if (_this.focusTimer) {\n        clearTimeout(_this.focusTimer);\n        _this.focusTimer = null;\n      }\n    };\n\n    _this.clearBlurTime = function () {\n      if (_this.blurTimer) {\n        clearTimeout(_this.blurTimer);\n        _this.blurTimer = null;\n      }\n    };\n\n    _this.clearComboboxTime = function () {\n      if (_this.comboboxTimer) {\n        clearTimeout(_this.comboboxTimer);\n        _this.comboboxTimer = null;\n      }\n    };\n\n    _this.updateFocusClassName = function () {\n      var rootRef = _this.rootRef;\n      var props = _this.props; // avoid setState and its side effect\n\n      if (_this._focused) {\n        classes(rootRef).add(\"\".concat(props.prefixCls, \"-focused\"));\n      } else {\n        classes(rootRef).remove(\"\".concat(props.prefixCls, \"-focused\"));\n      }\n    };\n\n    _this.maybeFocus = function (open, needFocus) {\n      if (needFocus || open) {\n        var input = _this.getInputDOMNode();\n\n        var _document = document,\n            activeElement = _document.activeElement;\n\n        if (input && (open || isMultipleOrTagsOrCombobox(_this.props))) {\n          if (activeElement !== input) {\n            input.focus();\n            _this._focused = true;\n          }\n        } else if (activeElement !== _this.selectionRef && _this.selectionRef) {\n          _this.selectionRef.focus();\n\n          _this._focused = true;\n        }\n      }\n    };\n\n    _this.removeSelected = function (selectedKey, e) {\n      var props = _this.props;\n\n      if (props.disabled || _this.isChildDisabled(selectedKey)) {\n        return;\n      } // Do not trigger Trigger popup\n\n\n      if (e && e.stopPropagation) {\n        e.stopPropagation();\n      }\n\n      var oldValue = _this.state.value;\n      var value = oldValue.filter(function (singleValue) {\n        return singleValue !== selectedKey;\n      });\n      var canMultiple = isMultipleOrTags(props);\n\n      if (canMultiple) {\n        var event = selectedKey;\n\n        if (props.labelInValue) {\n          event = {\n            key: selectedKey,\n            label: _this.getLabelBySingleValue(selectedKey)\n          };\n        }\n\n        if (props.onDeselect) {\n          props.onDeselect(event, _this.getOptionBySingleValue(selectedKey));\n        }\n      }\n\n      _this.fireChange(value);\n    };\n\n    _this.openIfHasChildren = function () {\n      var props = _this.props;\n\n      if (React.Children.count(props.children) || isSingleMode(props)) {\n        _this.setOpenState(true);\n      }\n    };\n\n    _this.fireSelect = function (value) {\n      if (_this.props.onSelect) {\n        _this.props.onSelect(_this.getVLBySingleValue(value), _this.getOptionBySingleValue(value));\n      }\n    };\n\n    _this.fireChange = function (value) {\n      var props = _this.props;\n\n      if (!('value' in props)) {\n        _this.setState({\n          value: value\n        }, _this.forcePopupAlign);\n      }\n\n      var vls = _this.getVLForOnChange(value);\n\n      var options = _this.getOptionsBySingleValue(value);\n\n      if (props.onChange) {\n        props.onChange(vls, isMultipleOrTags(_this.props) ? options : options[0]);\n      }\n    };\n\n    _this.isChildDisabled = function (key) {\n      return childrenToArray(_this.props.children).some(function (child) {\n        var childValue = getValuePropValue(child);\n        return childValue === key && child.props && child.props.disabled;\n      });\n    };\n\n    _this.forcePopupAlign = function () {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (_this.selectTriggerRef && _this.selectTriggerRef.triggerRef) {\n        _this.selectTriggerRef.triggerRef.forcePopupAlign();\n      }\n    };\n\n    _this.renderFilterOptions = function () {\n      var inputValue = _this.state.inputValue;\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          tags = _this$props3.tags,\n          notFoundContent = _this$props3.notFoundContent;\n      var menuItems = [];\n      var childrenKeys = [];\n      var empty = false;\n\n      var options = _this.renderFilterOptionsFromChildren(children, childrenKeys, menuItems);\n\n      if (tags) {\n        // tags value must be string\n        var value = _this.state.value;\n        value = value.filter(function (singleValue) {\n          return childrenKeys.indexOf(singleValue) === -1 && (!inputValue || String(singleValue).indexOf(String(inputValue)) > -1);\n        }); // sort by length\n\n        value.sort(function (val1, val2) {\n          return val1.length - val2.length;\n        });\n        value.forEach(function (singleValue) {\n          var key = singleValue;\n          var menuItem = React.createElement(MenuItem, {\n            style: UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: key,\n            key: key\n          }, key);\n          options.push(menuItem);\n          menuItems.push(menuItem);\n        }); // ref: https://github.com/ant-design/ant-design/issues/14090\n\n        if (inputValue && menuItems.every(function (option) {\n          return getValuePropValue(option) !== inputValue;\n        })) {\n          options.unshift(React.createElement(MenuItem, {\n            style: UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: inputValue,\n            key: inputValue\n          }, inputValue));\n        }\n      }\n\n      if (!options.length && notFoundContent) {\n        empty = true;\n        options = [React.createElement(MenuItem, {\n          style: UNSELECTABLE_STYLE,\n          attribute: UNSELECTABLE_ATTRIBUTE,\n          disabled: true,\n          role: \"option\",\n          value: \"NOT_FOUND\",\n          key: \"NOT_FOUND\"\n        }, notFoundContent)];\n      }\n\n      return {\n        empty: empty,\n        options: options\n      };\n    };\n\n    _this.renderFilterOptionsFromChildren = function (children, childrenKeys, menuItems) {\n      var sel = [];\n      var props = _this.props;\n      var inputValue = _this.state.inputValue;\n      var tags = props.tags;\n      React.Children.forEach(children, function (child) {\n        if (!child) {\n          return;\n        }\n\n        var type = child.type;\n\n        if (type.isSelectOptGroup) {\n          var label = child.props.label;\n          var key = child.key;\n\n          if (!key && typeof label === 'string') {\n            key = label;\n          } else if (!label && key) {\n            label = key;\n          } // Match option group label\n\n\n          if (inputValue && _this.filterOption(inputValue, child)) {\n            var innerItems = childrenToArray(child.props.children).map(function (subChild) {\n              var childValueSub = getValuePropValue(subChild) || subChild.key;\n              return React.createElement(MenuItem, _extends({\n                key: childValueSub,\n                value: childValueSub\n              }, subChild.props));\n            });\n            sel.push(React.createElement(MenuItemGroup, {\n              key: key,\n              title: label\n            }, innerItems)); // Not match\n          } else {\n            var _innerItems = _this.renderFilterOptionsFromChildren(child.props.children, childrenKeys, menuItems);\n\n            if (_innerItems.length) {\n              sel.push(React.createElement(MenuItemGroup, {\n                key: key,\n                title: label\n              }, _innerItems));\n            }\n          }\n\n          return;\n        }\n\n        warning(type.isSelectOption, 'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' + \"instead of `\".concat(type.name || type.displayName || child.type, \"`.\"));\n        var childValue = getValuePropValue(child);\n        validateOptionValue(childValue, _this.props);\n\n        if (_this.filterOption(inputValue, child)) {\n          var menuItem = React.createElement(MenuItem, _extends({\n            style: UNSELECTABLE_STYLE,\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: childValue,\n            key: childValue,\n            role: \"option\"\n          }, child.props));\n          sel.push(menuItem);\n          menuItems.push(menuItem);\n        }\n\n        if (tags) {\n          childrenKeys.push(childValue);\n        }\n      });\n      return sel;\n    };\n\n    _this.renderTopControlNode = function () {\n      var _this$state = _this.state,\n          open = _this$state.open,\n          inputValue = _this$state.inputValue;\n      var value = _this.state.value;\n      var props = _this.props;\n      var choiceTransitionName = props.choiceTransitionName,\n          prefixCls = props.prefixCls,\n          maxTagTextLength = props.maxTagTextLength,\n          maxTagCount = props.maxTagCount,\n          showSearch = props.showSearch,\n          removeIcon = props.removeIcon;\n      var maxTagPlaceholder = props.maxTagPlaceholder;\n      var className = \"\".concat(prefixCls, \"-selection__rendered\"); // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\n\n      var innerNode = null;\n\n      if (isSingleMode(props)) {\n        var selectedValue = null;\n\n        if (value.length) {\n          var showSelectedValue = false;\n          var opacity = 1;\n\n          if (!showSearch) {\n            showSelectedValue = true;\n          } else if (open) {\n            showSelectedValue = !inputValue;\n\n            if (showSelectedValue) {\n              opacity = 0.4;\n            }\n          } else {\n            showSelectedValue = true;\n          }\n\n          var singleValue = value[0];\n\n          var _this$getOptionInfoBy3 = _this.getOptionInfoBySingleValue(singleValue),\n              label = _this$getOptionInfoBy3.label,\n              title = _this$getOptionInfoBy3.title;\n\n          selectedValue = React.createElement(\"div\", {\n            key: \"value\",\n            className: \"\".concat(prefixCls, \"-selection-selected-value\"),\n            title: toTitle(title || label),\n            style: {\n              display: showSelectedValue ? 'block' : 'none',\n              opacity: opacity\n            }\n          }, label);\n        }\n\n        if (!showSearch) {\n          innerNode = [selectedValue];\n        } else {\n          innerNode = [selectedValue, React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n            key: \"input\",\n            style: {\n              display: open ? 'block' : 'none'\n            }\n          }, _this.getInputElement())];\n        }\n      } else {\n        var selectedValueNodes = [];\n        var limitedCountValue = value;\n        var maxTagPlaceholderEl;\n\n        if (maxTagCount !== undefined && value.length > maxTagCount) {\n          limitedCountValue = limitedCountValue.slice(0, maxTagCount);\n\n          var omittedValues = _this.getVLForOnChange(value.slice(maxTagCount, value.length));\n\n          var content = \"+ \".concat(value.length - maxTagCount, \" ...\");\n\n          if (maxTagPlaceholder) {\n            content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n          }\n\n          maxTagPlaceholderEl = React.createElement(\"li\", _extends({\n            style: UNSELECTABLE_STYLE\n          }, UNSELECTABLE_ATTRIBUTE, {\n            role: \"presentation\",\n            onMouseDown: preventDefaultEvent,\n            className: \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\"),\n            key: \"maxTagPlaceholder\",\n            title: toTitle(content)\n          }), React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-selection__choice__content\")\n          }, content));\n        }\n\n        if (isMultipleOrTags(props)) {\n          selectedValueNodes = limitedCountValue.map(function (singleValue) {\n            var info = _this.getOptionInfoBySingleValue(singleValue);\n\n            var content = info.label;\n            var title = info.title || content;\n\n            if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {\n              content = \"\".concat(content.slice(0, maxTagTextLength), \"...\");\n            }\n\n            var disabled = _this.isChildDisabled(singleValue);\n\n            var choiceClassName = disabled ? \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\") : \"\".concat(prefixCls, \"-selection__choice\");\n            return React.createElement(\"li\", _extends({\n              style: UNSELECTABLE_STYLE\n            }, UNSELECTABLE_ATTRIBUTE, {\n              onMouseDown: preventDefaultEvent,\n              className: choiceClassName,\n              role: \"presentation\",\n              key: singleValue || SELECT_EMPTY_VALUE_KEY,\n              title: toTitle(title)\n            }), React.createElement(\"div\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__content\")\n            }, content), disabled ? null : React.createElement(\"span\", {\n              onClick: function onClick(event) {\n                _this.removeSelected(singleValue, event);\n              },\n              className: \"\".concat(prefixCls, \"-selection__choice__remove\")\n            }, removeIcon || React.createElement(\"i\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__remove-icon\")\n            }, \"\\xD7\")));\n          });\n        }\n\n        if (maxTagPlaceholderEl) {\n          selectedValueNodes.push(maxTagPlaceholderEl);\n        }\n\n        selectedValueNodes.push(React.createElement(\"li\", {\n          className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n          key: \"__input\"\n        }, _this.getInputElement()));\n\n        if (isMultipleOrTags(props) && choiceTransitionName) {\n          innerNode = React.createElement(Animate, {\n            onLeave: _this.onChoiceAnimationLeave,\n            component: \"ul\",\n            transitionName: choiceTransitionName\n          }, selectedValueNodes);\n        } else {\n          innerNode = React.createElement(\"ul\", null, selectedValueNodes);\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: className,\n        ref: _this.saveTopCtrlRef\n      }, _this.getPlaceholderElement(), innerNode);\n    };\n\n    var optionsInfo = Select.getOptionsInfoFromProps(props);\n\n    if (props.tags && typeof props.filterOption !== 'function') {\n      var isDisabledExist = Object.keys(optionsInfo).some(function (key) {\n        return optionsInfo[key].disabled;\n      });\n      warning(!isDisabledExist, 'Please avoid setting option to disabled in tags mode since user can always type text as tag.');\n    }\n\n    _this.state = {\n      value: Select.getValueFromProps(props, true),\n      inputValue: props.combobox ? Select.getInputValueForCombobox(props, optionsInfo, true) : '',\n      open: props.defaultOpen,\n      optionsInfo: optionsInfo,\n      backfillValue: '',\n      // a flag for aviod redundant getOptionsInfoFromProps call\n      skipBuildOptionsInfo: true,\n      ariaId: ''\n    };\n    _this.saveInputRef = saveRef(_assertThisInitialized(_this), 'inputRef');\n    _this.saveInputMirrorRef = saveRef(_assertThisInitialized(_this), 'inputMirrorRef');\n    _this.saveTopCtrlRef = saveRef(_assertThisInitialized(_this), 'topCtrlRef');\n    _this.saveSelectTriggerRef = saveRef(_assertThisInitialized(_this), 'selectTriggerRef');\n    _this.saveRootRef = saveRef(_assertThisInitialized(_this), 'rootRef');\n    _this.saveSelectionRef = saveRef(_assertThisInitialized(_this), 'selectionRef');\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // when defaultOpen is true, we should auto focus search input\n      // https://github.com/ant-design/ant-design/issues/14254\n      if (this.props.autoFocus || this.state.open) {\n        this.focus();\n      }\n\n      this.setState({\n        ariaId: generateUUID()\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (isMultipleOrTags(this.props)) {\n        var inputNode = this.getInputDOMNode();\n        var mirrorNode = this.getInputMirrorDOMNode();\n\n        if (inputNode && inputNode.value && mirrorNode) {\n          inputNode.style.width = '';\n          inputNode.style.width = \"\".concat(mirrorNode.clientWidth, \"px\");\n        } else if (inputNode) {\n          inputNode.style.width = '';\n        }\n      }\n\n      this.forcePopupAlign();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearFocusTime();\n      this.clearBlurTime();\n      this.clearComboboxTime();\n\n      if (this.dropdownContainer) {\n        ReactDOM.unmountComponentAtNode(this.dropdownContainer);\n        document.body.removeChild(this.dropdownContainer);\n        this.dropdownContainer = null;\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.focus();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      if (isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.blur();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().blur();\n      }\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow(multiple) {\n      // showArrow : Set to true if not multiple by default but keep set value.\n      var _this$props4 = this.props,\n          _this$props4$showArro = _this$props4.showArrow,\n          showArrow = _this$props4$showArro === void 0 ? !multiple : _this$props4$showArro,\n          loading = _this$props4.loading,\n          inputIcon = _this$props4.inputIcon,\n          prefixCls = _this$props4.prefixCls;\n\n      if (!showArrow && !loading) {\n        return null;\n      } // if loading  have loading icon\n\n\n      var defaultIcon = loading ? React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-loading\")\n      }) : React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-icon\")\n      });\n      return React.createElement(\"span\", _extends({\n        key: \"arrow\",\n        className: \"\".concat(prefixCls, \"-arrow\"),\n        style: UNSELECTABLE_STYLE\n      }, UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onArrowClick\n      }), inputIcon || defaultIcon);\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          allowClear = _this$props5.allowClear,\n          clearIcon = _this$props5.clearIcon;\n      var inputValue = this.state.inputValue;\n      var value = this.state.value;\n      var clear = React.createElement(\"span\", _extends({\n        key: \"clear\",\n        className: \"\".concat(prefixCls, \"-selection__clear\"),\n        onMouseDown: preventDefaultEvent,\n        style: UNSELECTABLE_STYLE\n      }, UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onClearSelection\n      }), clearIcon || React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-selection__clear-icon\")\n      }, \"\\xD7\"));\n\n      if (!allowClear) {\n        return null;\n      }\n\n      if (isCombobox(this.props)) {\n        if (inputValue) {\n          return clear;\n        }\n\n        return null;\n      }\n\n      if (inputValue || value.length) {\n        return clear;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _rootCls;\n\n      var props = this.props;\n      var multiple = isMultipleOrTags(props); // Default set showArrow to true if not set (not set directly in defaultProps to handle multiple case)\n\n      var _props$showArrow = props.showArrow,\n          showArrow = _props$showArrow === void 0 ? true : _props$showArrow;\n      var state = this.state;\n      var className = props.className,\n          disabled = props.disabled,\n          prefixCls = props.prefixCls,\n          loading = props.loading;\n      var ctrlNode = this.renderTopControlNode();\n      var _this$state2 = this.state,\n          open = _this$state2.open,\n          ariaId = _this$state2.ariaId;\n\n      if (open) {\n        var filterOptions = this.renderFilterOptions();\n        this._empty = filterOptions.empty;\n        this._options = filterOptions.options;\n      }\n\n      var realOpen = this.getRealOpenState();\n      var empty = this._empty;\n      var options = this._options || [];\n      var dataOrAriaAttributeProps = {};\n      Object.keys(props).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(props, key) && (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')) {\n          dataOrAriaAttributeProps[key] = props[key];\n        }\n      }); // for (const key in props) {\n      //   if (\n      //     Object.prototype.hasOwnProperty.call(props, key) &&\n      //     (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')\n      //   ) {\n      //     dataOrAriaAttributeProps[key] = props[key];\n      //   }\n      // }\n\n      var extraSelectionProps = _extends({}, dataOrAriaAttributeProps);\n\n      if (!isMultipleOrTagsOrCombobox(props)) {\n        extraSelectionProps = _extends(_extends({}, extraSelectionProps), {\n          onKeyDown: this.onKeyDown,\n          tabIndex: props.disabled ? -1 : props.tabIndex\n        });\n      }\n\n      var rootCls = (_rootCls = {}, _defineProperty(_rootCls, className, !!className), _defineProperty(_rootCls, prefixCls, 1), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-focused\"), open || !!this._focused), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-combobox\"), isCombobox(props)), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-enabled\"), !disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-allow-clear\"), !!props.allowClear), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-no-arrow\"), !showArrow), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-loading\"), !!loading), _rootCls);\n      return React.createElement(SelectTrigger, {\n        onPopupFocus: this.onPopupFocus,\n        onMouseEnter: this.props.onMouseEnter,\n        onMouseLeave: this.props.onMouseLeave,\n        dropdownAlign: props.dropdownAlign,\n        dropdownClassName: props.dropdownClassName,\n        dropdownMatchSelectWidth: props.dropdownMatchSelectWidth,\n        defaultActiveFirstOption: props.defaultActiveFirstOption,\n        dropdownMenuStyle: props.dropdownMenuStyle,\n        transitionName: props.transitionName,\n        animation: props.animation,\n        prefixCls: props.prefixCls,\n        dropdownStyle: props.dropdownStyle,\n        combobox: props.combobox,\n        showSearch: props.showSearch,\n        options: options,\n        empty: empty,\n        multiple: multiple,\n        disabled: disabled,\n        visible: realOpen,\n        inputValue: state.inputValue,\n        value: state.value,\n        backfillValue: state.backfillValue,\n        firstActiveValue: props.firstActiveValue,\n        onDropdownVisibleChange: this.onDropdownVisibleChange,\n        getPopupContainer: props.getPopupContainer,\n        onMenuSelect: this.onMenuSelect,\n        onMenuDeselect: this.onMenuDeselect,\n        onPopupScroll: props.onPopupScroll,\n        showAction: props.showAction,\n        ref: this.saveSelectTriggerRef,\n        menuItemSelectedIcon: props.menuItemSelectedIcon,\n        dropdownRender: props.dropdownRender,\n        ariaId: ariaId\n      }, React.createElement(\"div\", {\n        id: props.id,\n        style: props.style,\n        ref: this.saveRootRef,\n        onBlur: this.onOuterBlur,\n        onFocus: this.onOuterFocus,\n        className: classnames(rootCls),\n        onMouseDown: this.markMouseDown,\n        onMouseUp: this.markMouseLeave,\n        onMouseOut: this.markMouseLeave\n      }, React.createElement(\"div\", _extends({\n        ref: this.saveSelectionRef,\n        key: \"selection\",\n        className: \"\".concat(prefixCls, \"-selection\\n            \").concat(prefixCls, \"-selection--\").concat(multiple ? 'multiple' : 'single'),\n        role: \"combobox\",\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"true\",\n        \"aria-controls\": ariaId,\n        \"aria-expanded\": realOpen\n      }, extraSelectionProps), ctrlNode, this.renderClear(), this.renderArrow(!!multiple))));\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\nSelect.propTypes = SelectPropTypes;\nSelect.defaultProps = {\n  prefixCls: 'rc-select',\n  defaultOpen: false,\n  labelInValue: false,\n  defaultActiveFirstOption: true,\n  showSearch: true,\n  allowClear: false,\n  placeholder: '',\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop,\n  onSelect: noop,\n  onSearch: noop,\n  onDeselect: noop,\n  onInputKeyDown: noop,\n  dropdownMatchSelectWidth: true,\n  dropdownStyle: {},\n  dropdownMenuStyle: {},\n  optionFilterProp: 'value',\n  optionLabelProp: 'value',\n  notFoundContent: 'Not Found',\n  backfill: false,\n  showAction: ['click'],\n  tokenSeparators: [],\n  autoClearSearchValue: true,\n  tabIndex: 0,\n  dropdownRender: function dropdownRender(menu) {\n    return menu;\n  }\n};\n\nSelect.getDerivedStateFromProps = function (nextProps, prevState) {\n  var optionsInfo = prevState.skipBuildOptionsInfo ? prevState.optionsInfo : Select.getOptionsInfoFromProps(nextProps, prevState);\n  var newState = {\n    optionsInfo: optionsInfo,\n    skipBuildOptionsInfo: false\n  };\n\n  if ('open' in nextProps) {\n    newState.open = nextProps.open;\n  }\n\n  if (nextProps.disabled && prevState.open) {\n    newState.open = false;\n  }\n\n  if ('value' in nextProps) {\n    var value = Select.getValueFromProps(nextProps);\n    newState.value = value;\n\n    if (nextProps.combobox) {\n      newState.inputValue = Select.getInputValueForCombobox(nextProps, optionsInfo);\n    }\n  }\n\n  return newState;\n};\n\nSelect.getOptionsFromChildren = function (children) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  React.Children.forEach(children, function (child) {\n    if (!child) {\n      return;\n    }\n\n    var type = child.type;\n\n    if (type.isSelectOptGroup) {\n      Select.getOptionsFromChildren(child.props.children, options);\n    } else {\n      options.push(child);\n    }\n  });\n  return options;\n};\n\nSelect.getInputValueForCombobox = function (props, optionsInfo, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = toArray(props.defaultValue);\n  }\n\n  if (value.length) {\n    value = value[0];\n  } else {\n    return '';\n  }\n\n  var label = value;\n\n  if (props.labelInValue) {\n    label = value.label;\n  } else if (optionsInfo[getMapKey(value)]) {\n    label = optionsInfo[getMapKey(value)].label;\n  }\n\n  if (label === undefined) {\n    label = '';\n  }\n\n  return label;\n};\n\nSelect.getLabelFromOption = function (props, option) {\n  return getPropValue(option, props.optionLabelProp);\n};\n\nSelect.getOptionsInfoFromProps = function (props, preState) {\n  var options = Select.getOptionsFromChildren(props.children);\n  var optionsInfo = {};\n  options.forEach(function (option) {\n    var singleValue = getValuePropValue(option);\n    optionsInfo[getMapKey(singleValue)] = {\n      option: option,\n      value: singleValue,\n      label: Select.getLabelFromOption(props, option),\n      title: option.props.title,\n      disabled: option.props.disabled\n    };\n  });\n\n  if (preState) {\n    // keep option info in pre state value.\n    var oldOptionsInfo = preState.optionsInfo;\n    var value = preState.value;\n\n    if (value) {\n      value.forEach(function (v) {\n        var key = getMapKey(v);\n\n        if (!optionsInfo[key] && oldOptionsInfo[key] !== undefined) {\n          optionsInfo[key] = oldOptionsInfo[key];\n        }\n      });\n    }\n  }\n\n  return optionsInfo;\n};\n\nSelect.getValueFromProps = function (props, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = toArray(props.defaultValue);\n  }\n\n  if (props.labelInValue) {\n    value = value.map(function (v) {\n      return v.key;\n    });\n  }\n\n  return value;\n};\n\nSelect.displayName = 'Select';\npolyfill(Select);\nexport default Select;","map":{"version":3,"sources":["C:/Users/lepan/Desktop/CIS550-Project/final project/client/node_modules/rc-select/es/Select.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","p","classnames","classes","Animate","Item","MenuItem","ItemGroup","MenuItemGroup","childrenToArray","KeyCode","React","ReactDOM","polyfill","warning","Option","isHidden","node","offsetParent","SelectPropTypes","SelectTrigger","defaultFilterFn","findFirstMenuItem","findIndexInValueBySingleValue","generateUUID","getLabelFromPropsValue","getMapKey","getPropValue","getValuePropValue","includesSeparators","isCombobox","isMultipleOrTags","isMultipleOrTagsOrCombobox","isSingleMode","preventDefaultEvent","saveRef","splitBySeparators","toArray","toTitle","UNSELECTABLE_ATTRIBUTE","UNSELECTABLE_STYLE","validateOptionValue","SELECT_EMPTY_VALUE_KEY","noop","chaining","_len","fns","Array","_key","_len2","args","_key2","Select","_React$Component","_this","inputRef","inputMirrorRef","topCtrlRef","selectTriggerRef","rootRef","selectionRef","dropdownContainer","blurTimer","focusTimer","comboboxTimer","_focused","_mouseDown","_options","_empty","onInputChange","event","tokenSeparators","val","nextValue","getValueByInput","undefined","fireChange","setOpenState","needFocus","setInputValue","setState","open","onDropdownVisibleChange","clearBlurTime","timeoutFocus","updateFocusClassName","onKeyDown","state","disabled","keyCode","getInputDOMNode","onInputKeyDown","ENTER","DOWN","preventDefault","SPACE","_this$props","combobox","defaultActiveFirstOption","isRealOpen","getRealOpenState","BACKSPACE","removeSelected","openIfHasChildren","stopPropagation","setTimeout","ESC","menu","getInnerMenu","handleBackfill","onMenuSelect","_ref","item","selectedValue","lastValue","skipTrigger","concat","backfillValue","fireSearch","fireSelect","inputValue","optionLabelProp","autoClearSearchValue","onMenuDeselect","_ref2","domEvent","type","menuItemDomNode","findDOMNode","onArrowClick","e","onPlaceholderClick","focus","onOuterFocus","inputNode","onPopupFocus","maybeFocus","onOuterBlur","window","showSearch","options","firstOption","tmpValue","onBlur","getVLForOnChange","onClearSelection","onChoiceAnimationLeave","forcePopupAlign","getOptionInfoBySingleValue","optionsInfo","info","defaultLabel","labelInValue","valueLabel","defaultValueLabel","defaultValue","defaultInfo","option","createElement","label","getOptionBySingleValue","_this$getOptionInfoBy","getOptionsBySingleValue","values","map","getValueByLabel","keys","forEach","oldLable","join","getVLBySingleValue","getLabelBySingleValue","vlsS","vls","v","vl","_this$getOptionInfoBy2","getDropdownContainer","document","body","appendChild","getPlaceholderElement","hidden","placeholder","onMouseDown","style","display","onClick","className","prefixCls","getInputElement","defaultInput","id","autoComplete","inputElement","inputCls","cloneElement","ref","saveInputRef","onChange","saveInputMirrorRef","querySelector","getInputMirrorDOMNode","getPopupDOMNode","getPopupMenuComponent","config","nextState","onSearch","prevState","str","_this$props2","multiple","hasNewValue","_open","markMouseDown","markMouseLeave","backfill","filterOption","input","child","defaultFilter","filterFn","bind","onFocus","clearFocusTime","clearTimeout","clearComboboxTime","add","remove","_document","activeElement","selectedKey","isChildDisabled","oldValue","filter","singleValue","canMultiple","onDeselect","Children","count","children","onSelect","some","childValue","triggerRef","renderFilterOptions","_this$props3","tags","notFoundContent","menuItems","childrenKeys","empty","renderFilterOptionsFromChildren","indexOf","String","sort","val1","val2","menuItem","role","attribute","push","every","unshift","sel","isSelectOptGroup","innerItems","subChild","childValueSub","title","_innerItems","isSelectOption","name","displayName","renderTopControlNode","_this$state","choiceTransitionName","maxTagTextLength","maxTagCount","removeIcon","maxTagPlaceholder","innerNode","showSelectedValue","opacity","_this$getOptionInfoBy3","selectedValueNodes","limitedCountValue","maxTagPlaceholderEl","slice","omittedValues","content","choiceClassName","onLeave","component","transitionName","saveTopCtrlRef","getOptionsInfoFromProps","isDisabledExist","getValueFromProps","getInputValueForCombobox","defaultOpen","skipBuildOptionsInfo","ariaId","saveSelectTriggerRef","saveRootRef","saveSelectionRef","componentDidMount","autoFocus","componentDidUpdate","mirrorNode","width","clientWidth","componentWillUnmount","unmountComponentAtNode","removeChild","blur","renderArrow","_this$props4","_this$props4$showArro","showArrow","loading","inputIcon","defaultIcon","renderClear","_this$props5","allowClear","clearIcon","clear","render","_rootCls","_props$showArrow","ctrlNode","_this$state2","filterOptions","realOpen","dataOrAriaAttributeProps","substr","extraSelectionProps","tabIndex","rootCls","onMouseEnter","onMouseLeave","dropdownAlign","dropdownClassName","dropdownMatchSelectWidth","dropdownMenuStyle","animation","dropdownStyle","visible","firstActiveValue","getPopupContainer","onPopupScroll","showAction","menuItemSelectedIcon","dropdownRender","onMouseUp","onMouseOut","Component","propTypes","defaultProps","optionFilterProp","getDerivedStateFromProps","nextProps","newState","getOptionsFromChildren","useDefaultValue","getLabelFromOption","preState","oldOptionsInfo"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\r\n\r\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\nimport classnames from 'classnames';\r\nimport classes from 'component-classes';\r\nimport Animate from 'rc-animate';\r\nimport { Item as MenuItem, ItemGroup as MenuItemGroup } from 'rc-menu';\r\nimport childrenToArray from \"rc-util/es/Children/toArray\";\r\nimport KeyCode from \"rc-util/es/KeyCode\";\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { polyfill } from 'react-lifecycles-compat';\r\nimport warning from 'warning';\r\nimport Option from './Option'; // Where el is the DOM element you'd like to test for visibility\r\n\r\nfunction isHidden(node) {\r\n  return !node || node.offsetParent === null;\r\n}\r\n\r\nimport SelectPropTypes from './PropTypes';\r\nimport SelectTrigger from './SelectTrigger';\r\nimport { defaultFilterFn, findFirstMenuItem, findIndexInValueBySingleValue, generateUUID, getLabelFromPropsValue, getMapKey, getPropValue, getValuePropValue, includesSeparators, isCombobox, isMultipleOrTags, isMultipleOrTagsOrCombobox, isSingleMode, preventDefaultEvent, saveRef, splitBySeparators, toArray, toTitle, UNSELECTABLE_ATTRIBUTE, UNSELECTABLE_STYLE, validateOptionValue } from './util';\r\nvar SELECT_EMPTY_VALUE_KEY = 'RC_SELECT_EMPTY_VALUE_KEY';\r\n\r\nvar noop = function noop() {\r\n  return null;\r\n};\r\n\r\nfunction chaining() {\r\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\r\n    fns[_key] = arguments[_key];\r\n  }\r\n\r\n  return function () {\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (var i = 0; i < fns.length; i++) {\r\n      if (fns[i] && typeof fns[i] === 'function') {\r\n        fns[i].apply(chaining, args);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nvar Select =\r\n/*#__PURE__*/\r\nfunction (_React$Component) {\r\n  _inherits(Select, _React$Component);\r\n\r\n  function Select(props) {\r\n    var _this;\r\n\r\n    _classCallCheck(this, Select);\r\n\r\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\r\n    _this.inputRef = null;\r\n    _this.inputMirrorRef = null;\r\n    _this.topCtrlRef = null;\r\n    _this.selectTriggerRef = null;\r\n    _this.rootRef = null;\r\n    _this.selectionRef = null;\r\n    _this.dropdownContainer = null;\r\n    _this.blurTimer = null;\r\n    _this.focusTimer = null;\r\n    _this.comboboxTimer = null; // tslint:disable-next-line:variable-name\r\n\r\n    _this._focused = false; // tslint:disable-next-line:variable-name\r\n\r\n    _this._mouseDown = false; // tslint:disable-next-line:variable-name\r\n\r\n    _this._options = []; // tslint:disable-next-line:variable-name\r\n\r\n    _this._empty = false;\r\n\r\n    _this.onInputChange = function (event) {\r\n      var tokenSeparators = _this.props.tokenSeparators;\r\n      var val = event.target.value;\r\n\r\n      if (isMultipleOrTags(_this.props) && tokenSeparators.length && includesSeparators(val, tokenSeparators)) {\r\n        var nextValue = _this.getValueByInput(val);\r\n\r\n        if (nextValue !== undefined) {\r\n          _this.fireChange(nextValue);\r\n        }\r\n\r\n        _this.setOpenState(false, {\r\n          needFocus: true\r\n        });\r\n\r\n        _this.setInputValue('', false);\r\n\r\n        return;\r\n      }\r\n\r\n      _this.setInputValue(val);\r\n\r\n      _this.setState({\r\n        open: true\r\n      });\r\n\r\n      if (isCombobox(_this.props)) {\r\n        _this.fireChange([val]);\r\n      }\r\n    };\r\n\r\n    _this.onDropdownVisibleChange = function (open) {\r\n      if (open && !_this._focused) {\r\n        _this.clearBlurTime();\r\n\r\n        _this.timeoutFocus();\r\n\r\n        _this._focused = true;\r\n\r\n        _this.updateFocusClassName();\r\n      }\r\n\r\n      _this.setOpenState(open);\r\n    }; // combobox ignore\r\n\r\n\r\n    _this.onKeyDown = function (event) {\r\n      var open = _this.state.open;\r\n      var disabled = _this.props.disabled;\r\n\r\n      if (disabled) {\r\n        return;\r\n      }\r\n\r\n      var keyCode = event.keyCode;\r\n\r\n      if (open && !_this.getInputDOMNode()) {\r\n        _this.onInputKeyDown(event);\r\n      } else if (keyCode === KeyCode.ENTER || keyCode === KeyCode.DOWN) {\r\n        if (!open) {\r\n          _this.setOpenState(true);\r\n        }\r\n\r\n        event.preventDefault();\r\n      } else if (keyCode === KeyCode.SPACE) {\r\n        // Not block space if popup is shown\r\n        if (!open) {\r\n          _this.setOpenState(true);\r\n\r\n          event.preventDefault();\r\n        }\r\n      }\r\n    };\r\n\r\n    _this.onInputKeyDown = function (event) {\r\n      var _this$props = _this.props,\r\n          disabled = _this$props.disabled,\r\n          combobox = _this$props.combobox,\r\n          defaultActiveFirstOption = _this$props.defaultActiveFirstOption;\r\n\r\n      if (disabled) {\r\n        return;\r\n      }\r\n\r\n      var state = _this.state;\r\n\r\n      var isRealOpen = _this.getRealOpenState(state); // magic code\r\n\r\n\r\n      var keyCode = event.keyCode;\r\n\r\n      if (isMultipleOrTags(_this.props) && !event.target.value && keyCode === KeyCode.BACKSPACE) {\r\n        event.preventDefault();\r\n        var value = state.value;\r\n\r\n        if (value.length) {\r\n          _this.removeSelected(value[value.length - 1]);\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if (keyCode === KeyCode.DOWN) {\r\n        if (!state.open) {\r\n          _this.openIfHasChildren();\r\n\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          return;\r\n        }\r\n      } else if (keyCode === KeyCode.ENTER && state.open) {\r\n        // Aviod trigger form submit when select item\r\n        // https://github.com/ant-design/ant-design/issues/10861\r\n        // https://github.com/ant-design/ant-design/issues/14544\r\n        if (isRealOpen || !combobox) {\r\n          event.preventDefault();\r\n        } // Hard close popup to avoid lock of non option in combobox mode\r\n\r\n\r\n        if (isRealOpen && combobox && defaultActiveFirstOption === false) {\r\n          _this.comboboxTimer = setTimeout(function () {\r\n            _this.setOpenState(false);\r\n          });\r\n        }\r\n      } else if (keyCode === KeyCode.ESC) {\r\n        if (state.open) {\r\n          _this.setOpenState(false);\r\n\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if (isRealOpen && _this.selectTriggerRef) {\r\n        var menu = _this.selectTriggerRef.getInnerMenu();\r\n\r\n        if (menu && menu.onKeyDown(event, _this.handleBackfill)) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    _this.onMenuSelect = function (_ref) {\r\n      var item = _ref.item;\r\n\r\n      if (!item) {\r\n        return;\r\n      }\r\n\r\n      var value = _this.state.value;\r\n      var props = _this.props;\r\n      var selectedValue = getValuePropValue(item);\r\n      var lastValue = value[value.length - 1];\r\n      var skipTrigger = false;\r\n\r\n      if (isMultipleOrTags(props)) {\r\n        if (findIndexInValueBySingleValue(value, selectedValue) !== -1) {\r\n          skipTrigger = true;\r\n        } else {\r\n          value = value.concat([selectedValue]);\r\n        }\r\n      } else {\r\n        if (!isCombobox(props) && lastValue !== undefined && lastValue === selectedValue && selectedValue !== _this.state.backfillValue) {\r\n          _this.setOpenState(false, {\r\n            needFocus: true,\r\n            fireSearch: false\r\n          });\r\n\r\n          skipTrigger = true;\r\n        } else {\r\n          value = [selectedValue];\r\n\r\n          _this.setOpenState(false, {\r\n            needFocus: true,\r\n            fireSearch: false\r\n          });\r\n        }\r\n      }\r\n\r\n      if (!skipTrigger) {\r\n        _this.fireChange(value);\r\n      }\r\n\r\n      _this.fireSelect(selectedValue);\r\n\r\n      if (!skipTrigger) {\r\n        var inputValue = isCombobox(props) ? getPropValue(item, props.optionLabelProp) : '';\r\n\r\n        if (props.autoClearSearchValue) {\r\n          _this.setInputValue(inputValue, false);\r\n        }\r\n      }\r\n    };\r\n\r\n    _this.onMenuDeselect = function (_ref2) {\r\n      var item = _ref2.item,\r\n          domEvent = _ref2.domEvent;\r\n\r\n      if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode.ENTER) {\r\n        var menuItemDomNode = ReactDOM.findDOMNode(item); // https://github.com/ant-design/ant-design/issues/20465#issuecomment-569033796\r\n\r\n        if (!isHidden(menuItemDomNode)) {\r\n          _this.removeSelected(getValuePropValue(item));\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if (domEvent.type === 'click') {\r\n        _this.removeSelected(getValuePropValue(item));\r\n      }\r\n\r\n      var props = _this.props;\r\n\r\n      if (props.autoClearSearchValue) {\r\n        _this.setInputValue('');\r\n      }\r\n    };\r\n\r\n    _this.onArrowClick = function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      if (!_this.props.disabled) {\r\n        _this.setOpenState(!_this.state.open, {\r\n          needFocus: !_this.state.open\r\n        });\r\n      }\r\n    };\r\n\r\n    _this.onPlaceholderClick = function () {\r\n      if (_this.getInputDOMNode && _this.getInputDOMNode()) {\r\n        _this.getInputDOMNode().focus();\r\n      }\r\n    };\r\n\r\n    _this.onOuterFocus = function (e) {\r\n      if (_this.props.disabled) {\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n\r\n      _this.clearBlurTime(); // In IE11, onOuterFocus will be trigger twice when focus input\r\n      // First one: e.target is div\r\n      // Second one: e.target is input\r\n      // other browser only trigger second one\r\n      // https://github.com/ant-design/ant-design/issues/15942\r\n      // Here we ignore the first one when e.target is div\r\n\r\n\r\n      var inputNode = _this.getInputDOMNode();\r\n\r\n      if (inputNode && e.target === _this.rootRef) {\r\n        return;\r\n      }\r\n\r\n      if (!isMultipleOrTagsOrCombobox(_this.props) && e.target === inputNode) {\r\n        return;\r\n      }\r\n\r\n      if (_this._focused) {\r\n        return;\r\n      }\r\n\r\n      _this._focused = true;\r\n\r\n      _this.updateFocusClassName(); // only effect multiple or tag mode\r\n\r\n\r\n      if (!isMultipleOrTags(_this.props) || !_this._mouseDown) {\r\n        _this.timeoutFocus();\r\n      }\r\n    };\r\n\r\n    _this.onPopupFocus = function () {\r\n      // fix ie scrollbar, focus element again\r\n      _this.maybeFocus(true, true);\r\n    };\r\n\r\n    _this.onOuterBlur = function (e) {\r\n      if (_this.props.disabled) {\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n\r\n      _this.blurTimer = window.setTimeout(function () {\r\n        _this._focused = false;\r\n\r\n        _this.updateFocusClassName();\r\n\r\n        var props = _this.props;\r\n        var value = _this.state.value;\r\n        var inputValue = _this.state.inputValue;\r\n\r\n        if (isSingleMode(props) && props.showSearch && inputValue && props.defaultActiveFirstOption) {\r\n          var options = _this._options || [];\r\n\r\n          if (options.length) {\r\n            var firstOption = findFirstMenuItem(options);\r\n\r\n            if (firstOption) {\r\n              value = [getValuePropValue(firstOption)];\r\n\r\n              _this.fireChange(value);\r\n            }\r\n          }\r\n        } else if (isMultipleOrTags(props) && inputValue) {\r\n          if (_this._mouseDown) {\r\n            // need update dropmenu when not blur\r\n            _this.setInputValue('');\r\n          } else {\r\n            // why not use setState?\r\n            // https://github.com/ant-design/ant-design/issues/14262\r\n            _this.state.inputValue = '';\r\n\r\n            if (_this.getInputDOMNode && _this.getInputDOMNode()) {\r\n              _this.getInputDOMNode().value = '';\r\n            }\r\n          }\r\n\r\n          var tmpValue = _this.getValueByInput(inputValue);\r\n\r\n          if (tmpValue !== undefined) {\r\n            value = tmpValue;\r\n\r\n            _this.fireChange(value);\r\n          }\r\n        } // if click the rest space of Select in multiple mode\r\n\r\n\r\n        if (isMultipleOrTags(props) && _this._mouseDown) {\r\n          _this.maybeFocus(true, true);\r\n\r\n          _this._mouseDown = false;\r\n          return;\r\n        }\r\n\r\n        _this.setOpenState(false);\r\n\r\n        if (props.onBlur) {\r\n          props.onBlur(_this.getVLForOnChange(value));\r\n        }\r\n      }, 10);\r\n    };\r\n\r\n    _this.onClearSelection = function (event) {\r\n      var props = _this.props;\r\n      var state = _this.state;\r\n\r\n      if (props.disabled) {\r\n        return;\r\n      }\r\n\r\n      var inputValue = state.inputValue;\r\n      var value = state.value;\r\n      event.stopPropagation();\r\n\r\n      if (inputValue || value.length) {\r\n        if (value.length) {\r\n          _this.fireChange([]);\r\n        }\r\n\r\n        _this.setOpenState(false, {\r\n          needFocus: true\r\n        });\r\n\r\n        if (inputValue) {\r\n          _this.setInputValue('');\r\n        }\r\n      }\r\n    };\r\n\r\n    _this.onChoiceAnimationLeave = function () {\r\n      _this.forcePopupAlign();\r\n    };\r\n\r\n    _this.getOptionInfoBySingleValue = function (value, optionsInfo) {\r\n      var info;\r\n      optionsInfo = optionsInfo || _this.state.optionsInfo;\r\n\r\n      if (optionsInfo[getMapKey(value)]) {\r\n        info = optionsInfo[getMapKey(value)];\r\n      }\r\n\r\n      if (info) {\r\n        return info;\r\n      }\r\n\r\n      var defaultLabel = value;\r\n\r\n      if (_this.props.labelInValue) {\r\n        var valueLabel = getLabelFromPropsValue(_this.props.value, value);\r\n        var defaultValueLabel = getLabelFromPropsValue(_this.props.defaultValue, value);\r\n\r\n        if (valueLabel !== undefined) {\r\n          defaultLabel = valueLabel;\r\n        } else if (defaultValueLabel !== undefined) {\r\n          defaultLabel = defaultValueLabel;\r\n        }\r\n      }\r\n\r\n      var defaultInfo = {\r\n        option: React.createElement(Option, {\r\n          value: value,\r\n          key: value\r\n        }, value),\r\n        value: value,\r\n        label: defaultLabel\r\n      };\r\n      return defaultInfo;\r\n    };\r\n\r\n    _this.getOptionBySingleValue = function (value) {\r\n      var _this$getOptionInfoBy = _this.getOptionInfoBySingleValue(value),\r\n          option = _this$getOptionInfoBy.option;\r\n\r\n      return option;\r\n    };\r\n\r\n    _this.getOptionsBySingleValue = function (values) {\r\n      return values.map(function (value) {\r\n        return _this.getOptionBySingleValue(value);\r\n      });\r\n    };\r\n\r\n    _this.getValueByLabel = function (label) {\r\n      if (label === undefined) {\r\n        return null;\r\n      }\r\n\r\n      var value = null;\r\n      Object.keys(_this.state.optionsInfo).forEach(function (key) {\r\n        var info = _this.state.optionsInfo[key];\r\n        var disabled = info.disabled;\r\n\r\n        if (disabled) {\r\n          return;\r\n        }\r\n\r\n        var oldLable = toArray(info.label);\r\n\r\n        if (oldLable && oldLable.join('') === label) {\r\n          value = info.value;\r\n        }\r\n      });\r\n      return value;\r\n    };\r\n\r\n    _this.getVLBySingleValue = function (value) {\r\n      if (_this.props.labelInValue) {\r\n        return {\r\n          key: value,\r\n          label: _this.getLabelBySingleValue(value)\r\n        };\r\n      }\r\n\r\n      return value;\r\n    };\r\n\r\n    _this.getVLForOnChange = function (vlsS) {\r\n      var vls = vlsS;\r\n\r\n      if (vls !== undefined) {\r\n        if (!_this.props.labelInValue) {\r\n          vls = vls.map(function (v) {\r\n            return v;\r\n          });\r\n        } else {\r\n          vls = vls.map(function (vl) {\r\n            return {\r\n              key: vl,\r\n              label: _this.getLabelBySingleValue(vl)\r\n            };\r\n          });\r\n        }\r\n\r\n        return isMultipleOrTags(_this.props) ? vls : vls[0];\r\n      }\r\n\r\n      return vls;\r\n    };\r\n\r\n    _this.getLabelBySingleValue = function (value, optionsInfo) {\r\n      var _this$getOptionInfoBy2 = _this.getOptionInfoBySingleValue(value, optionsInfo),\r\n          label = _this$getOptionInfoBy2.label;\r\n\r\n      return label;\r\n    };\r\n\r\n    _this.getDropdownContainer = function () {\r\n      if (!_this.dropdownContainer) {\r\n        _this.dropdownContainer = document.createElement('div');\r\n        document.body.appendChild(_this.dropdownContainer);\r\n      }\r\n\r\n      return _this.dropdownContainer;\r\n    };\r\n\r\n    _this.getPlaceholderElement = function () {\r\n      var props = _this.props;\r\n      var state = _this.state;\r\n      var hidden = false;\r\n\r\n      if (state.inputValue) {\r\n        hidden = true;\r\n      }\r\n\r\n      var value = state.value;\r\n\r\n      if (value.length) {\r\n        hidden = true;\r\n      }\r\n\r\n      if (isCombobox(props) && value.length === 1 && state.value && !state.value[0]) {\r\n        hidden = false;\r\n      }\r\n\r\n      var placeholder = props.placeholder;\r\n\r\n      if (placeholder) {\r\n        return React.createElement(\"div\", _extends({\r\n          onMouseDown: preventDefaultEvent,\r\n          style: _extends({\r\n            display: hidden ? 'none' : 'block'\r\n          }, UNSELECTABLE_STYLE)\r\n        }, UNSELECTABLE_ATTRIBUTE, {\r\n          onClick: _this.onPlaceholderClick,\r\n          className: \"\".concat(props.prefixCls, \"-selection__placeholder\")\r\n        }), placeholder);\r\n      }\r\n\r\n      return null;\r\n    };\r\n\r\n    _this.getInputElement = function () {\r\n      var props = _this.props;\r\n      var defaultInput = React.createElement(\"input\", {\r\n        id: props.id,\r\n        autoComplete: \"off\"\r\n      }); // tslint:disable-next-line:typedef-whitespace\r\n\r\n      var inputElement = props.getInputElement ? props.getInputElement() : defaultInput;\r\n      var inputCls = classnames(inputElement.props.className, _defineProperty({}, \"\".concat(props.prefixCls, \"-search__field\"), true)); // https://github.com/ant-design/ant-design/issues/4992#issuecomment-281542159\r\n      // Add space to the end of the inputValue as the width measurement tolerance\r\n\r\n      return React.createElement(\"div\", {\r\n        className: \"\".concat(props.prefixCls, \"-search__field__wrap\")\r\n      }, React.cloneElement(inputElement, {\r\n        ref: _this.saveInputRef,\r\n        onChange: _this.onInputChange,\r\n        onKeyDown: chaining(_this.onInputKeyDown, inputElement.props.onKeyDown, _this.props.onInputKeyDown),\r\n        value: _this.state.inputValue,\r\n        disabled: props.disabled,\r\n        className: inputCls\r\n      }), React.createElement(\"span\", {\r\n        ref: _this.saveInputMirrorRef,\r\n        className: \"\".concat(props.prefixCls, \"-search__field__mirror\")\r\n      }, _this.state.inputValue, \"\\xA0\"));\r\n    };\r\n\r\n    _this.getInputDOMNode = function () {\r\n      return _this.topCtrlRef ? _this.topCtrlRef.querySelector('input,textarea,div[contentEditable]') : _this.inputRef;\r\n    };\r\n\r\n    _this.getInputMirrorDOMNode = function () {\r\n      return _this.inputMirrorRef;\r\n    };\r\n\r\n    _this.getPopupDOMNode = function () {\r\n      if (_this.selectTriggerRef) {\r\n        return _this.selectTriggerRef.getPopupDOMNode();\r\n      }\r\n    };\r\n\r\n    _this.getPopupMenuComponent = function () {\r\n      if (_this.selectTriggerRef) {\r\n        return _this.selectTriggerRef.getInnerMenu();\r\n      }\r\n    };\r\n\r\n    _this.setOpenState = function (open) {\r\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n      var needFocus = config.needFocus,\r\n          fireSearch = config.fireSearch;\r\n      var props = _this.props;\r\n      var state = _this.state;\r\n\r\n      if (state.open === open) {\r\n        _this.maybeFocus(open, !!needFocus);\r\n\r\n        return;\r\n      }\r\n\r\n      if (_this.props.onDropdownVisibleChange) {\r\n        _this.props.onDropdownVisibleChange(open);\r\n      }\r\n\r\n      var nextState = {\r\n        open: open,\r\n        backfillValue: ''\r\n      }; // clear search input value when open is false in singleMode.\r\n      // https://github.com/ant-design/ant-design/issues/16572\r\n\r\n      if (!open && isSingleMode(props) && props.showSearch) {\r\n        _this.setInputValue('', fireSearch);\r\n      }\r\n\r\n      if (!open) {\r\n        _this.maybeFocus(open, !!needFocus);\r\n      }\r\n\r\n      _this.setState(_extends({\r\n        open: open\r\n      }, nextState), function () {\r\n        if (open) {\r\n          _this.maybeFocus(open, !!needFocus);\r\n        }\r\n      });\r\n    };\r\n\r\n    _this.setInputValue = function (inputValue) {\r\n      var fireSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\r\n      var onSearch = _this.props.onSearch;\r\n\r\n      if (inputValue !== _this.state.inputValue) {\r\n        _this.setState(function (prevState) {\r\n          // Additional check if `inputValue` changed in latest state.\r\n          if (fireSearch && inputValue !== prevState.inputValue && onSearch) {\r\n            onSearch(inputValue);\r\n          }\r\n\r\n          return {\r\n            inputValue: inputValue\r\n          };\r\n        }, _this.forcePopupAlign);\r\n      }\r\n    };\r\n\r\n    _this.getValueByInput = function (str) {\r\n      var _this$props2 = _this.props,\r\n          multiple = _this$props2.multiple,\r\n          tokenSeparators = _this$props2.tokenSeparators;\r\n      var nextValue = _this.state.value;\r\n      var hasNewValue = false;\r\n      splitBySeparators(str, tokenSeparators).forEach(function (label) {\r\n        var selectedValue = [label];\r\n\r\n        if (multiple) {\r\n          var value = _this.getValueByLabel(label);\r\n\r\n          if (value && findIndexInValueBySingleValue(nextValue, value) === -1) {\r\n            nextValue = nextValue.concat(value);\r\n            hasNewValue = true;\r\n\r\n            _this.fireSelect(value);\r\n          }\r\n        } else if (findIndexInValueBySingleValue(nextValue, label) === -1) {\r\n          nextValue = nextValue.concat(selectedValue);\r\n          hasNewValue = true;\r\n\r\n          _this.fireSelect(label);\r\n        }\r\n      });\r\n      return hasNewValue ? nextValue : undefined;\r\n    };\r\n\r\n    _this.getRealOpenState = function (state) {\r\n      // tslint:disable-next-line:variable-name\r\n      var _open = _this.props.open;\r\n\r\n      if (typeof _open === 'boolean') {\r\n        return _open;\r\n      }\r\n\r\n      var open = (state || _this.state).open;\r\n      var options = _this._options || [];\r\n\r\n      if (isMultipleOrTagsOrCombobox(_this.props) || !_this.props.showSearch) {\r\n        if (open && !options.length) {\r\n          open = false;\r\n        }\r\n      }\r\n\r\n      return open;\r\n    };\r\n\r\n    _this.markMouseDown = function () {\r\n      _this._mouseDown = true;\r\n    };\r\n\r\n    _this.markMouseLeave = function () {\r\n      _this._mouseDown = false;\r\n    };\r\n\r\n    _this.handleBackfill = function (item) {\r\n      if (!_this.props.backfill || !(isSingleMode(_this.props) || isCombobox(_this.props))) {\r\n        return;\r\n      }\r\n\r\n      var key = getValuePropValue(item);\r\n\r\n      if (isCombobox(_this.props)) {\r\n        _this.setInputValue(key, false);\r\n      }\r\n\r\n      _this.setState({\r\n        value: [key],\r\n        backfillValue: key\r\n      });\r\n    };\r\n\r\n    _this.filterOption = function (input, child) {\r\n      var defaultFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultFilterFn;\r\n      var value = _this.state.value;\r\n      var lastValue = value[value.length - 1];\r\n\r\n      if (!input || lastValue && lastValue === _this.state.backfillValue) {\r\n        return true;\r\n      }\r\n\r\n      var filterFn = _this.props.filterOption;\r\n\r\n      if ('filterOption' in _this.props) {\r\n        if (filterFn === true) {\r\n          filterFn = defaultFilter.bind(_assertThisInitialized(_this));\r\n        }\r\n      } else {\r\n        filterFn = defaultFilter.bind(_assertThisInitialized(_this));\r\n      }\r\n\r\n      if (!filterFn) {\r\n        return true;\r\n      } else if (typeof filterFn === 'function') {\r\n        return filterFn.call(_assertThisInitialized(_this), input, child);\r\n      } else if (child.props.disabled) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    };\r\n\r\n    _this.timeoutFocus = function () {\r\n      var onFocus = _this.props.onFocus;\r\n\r\n      if (_this.focusTimer) {\r\n        _this.clearFocusTime();\r\n      }\r\n\r\n      _this.focusTimer = window.setTimeout(function () {\r\n        if (onFocus) {\r\n          onFocus();\r\n        }\r\n      }, 10);\r\n    };\r\n\r\n    _this.clearFocusTime = function () {\r\n      if (_this.focusTimer) {\r\n        clearTimeout(_this.focusTimer);\r\n        _this.focusTimer = null;\r\n      }\r\n    };\r\n\r\n    _this.clearBlurTime = function () {\r\n      if (_this.blurTimer) {\r\n        clearTimeout(_this.blurTimer);\r\n        _this.blurTimer = null;\r\n      }\r\n    };\r\n\r\n    _this.clearComboboxTime = function () {\r\n      if (_this.comboboxTimer) {\r\n        clearTimeout(_this.comboboxTimer);\r\n        _this.comboboxTimer = null;\r\n      }\r\n    };\r\n\r\n    _this.updateFocusClassName = function () {\r\n      var rootRef = _this.rootRef;\r\n      var props = _this.props; // avoid setState and its side effect\r\n\r\n      if (_this._focused) {\r\n        classes(rootRef).add(\"\".concat(props.prefixCls, \"-focused\"));\r\n      } else {\r\n        classes(rootRef).remove(\"\".concat(props.prefixCls, \"-focused\"));\r\n      }\r\n    };\r\n\r\n    _this.maybeFocus = function (open, needFocus) {\r\n      if (needFocus || open) {\r\n        var input = _this.getInputDOMNode();\r\n\r\n        var _document = document,\r\n            activeElement = _document.activeElement;\r\n\r\n        if (input && (open || isMultipleOrTagsOrCombobox(_this.props))) {\r\n          if (activeElement !== input) {\r\n            input.focus();\r\n            _this._focused = true;\r\n          }\r\n        } else if (activeElement !== _this.selectionRef && _this.selectionRef) {\r\n          _this.selectionRef.focus();\r\n\r\n          _this._focused = true;\r\n        }\r\n      }\r\n    };\r\n\r\n    _this.removeSelected = function (selectedKey, e) {\r\n      var props = _this.props;\r\n\r\n      if (props.disabled || _this.isChildDisabled(selectedKey)) {\r\n        return;\r\n      } // Do not trigger Trigger popup\r\n\r\n\r\n      if (e && e.stopPropagation) {\r\n        e.stopPropagation();\r\n      }\r\n\r\n      var oldValue = _this.state.value;\r\n      var value = oldValue.filter(function (singleValue) {\r\n        return singleValue !== selectedKey;\r\n      });\r\n      var canMultiple = isMultipleOrTags(props);\r\n\r\n      if (canMultiple) {\r\n        var event = selectedKey;\r\n\r\n        if (props.labelInValue) {\r\n          event = {\r\n            key: selectedKey,\r\n            label: _this.getLabelBySingleValue(selectedKey)\r\n          };\r\n        }\r\n\r\n        if (props.onDeselect) {\r\n          props.onDeselect(event, _this.getOptionBySingleValue(selectedKey));\r\n        }\r\n      }\r\n\r\n      _this.fireChange(value);\r\n    };\r\n\r\n    _this.openIfHasChildren = function () {\r\n      var props = _this.props;\r\n\r\n      if (React.Children.count(props.children) || isSingleMode(props)) {\r\n        _this.setOpenState(true);\r\n      }\r\n    };\r\n\r\n    _this.fireSelect = function (value) {\r\n      if (_this.props.onSelect) {\r\n        _this.props.onSelect(_this.getVLBySingleValue(value), _this.getOptionBySingleValue(value));\r\n      }\r\n    };\r\n\r\n    _this.fireChange = function (value) {\r\n      var props = _this.props;\r\n\r\n      if (!('value' in props)) {\r\n        _this.setState({\r\n          value: value\r\n        }, _this.forcePopupAlign);\r\n      }\r\n\r\n      var vls = _this.getVLForOnChange(value);\r\n\r\n      var options = _this.getOptionsBySingleValue(value);\r\n\r\n      if (props.onChange) {\r\n        props.onChange(vls, isMultipleOrTags(_this.props) ? options : options[0]);\r\n      }\r\n    };\r\n\r\n    _this.isChildDisabled = function (key) {\r\n      return childrenToArray(_this.props.children).some(function (child) {\r\n        var childValue = getValuePropValue(child);\r\n        return childValue === key && child.props && child.props.disabled;\r\n      });\r\n    };\r\n\r\n    _this.forcePopupAlign = function () {\r\n      if (!_this.state.open) {\r\n        return;\r\n      }\r\n\r\n      if (_this.selectTriggerRef && _this.selectTriggerRef.triggerRef) {\r\n        _this.selectTriggerRef.triggerRef.forcePopupAlign();\r\n      }\r\n    };\r\n\r\n    _this.renderFilterOptions = function () {\r\n      var inputValue = _this.state.inputValue;\r\n      var _this$props3 = _this.props,\r\n          children = _this$props3.children,\r\n          tags = _this$props3.tags,\r\n          notFoundContent = _this$props3.notFoundContent;\r\n      var menuItems = [];\r\n      var childrenKeys = [];\r\n      var empty = false;\r\n\r\n      var options = _this.renderFilterOptionsFromChildren(children, childrenKeys, menuItems);\r\n\r\n      if (tags) {\r\n        // tags value must be string\r\n        var value = _this.state.value;\r\n        value = value.filter(function (singleValue) {\r\n          return childrenKeys.indexOf(singleValue) === -1 && (!inputValue || String(singleValue).indexOf(String(inputValue)) > -1);\r\n        }); // sort by length\r\n\r\n        value.sort(function (val1, val2) {\r\n          return val1.length - val2.length;\r\n        });\r\n        value.forEach(function (singleValue) {\r\n          var key = singleValue;\r\n          var menuItem = React.createElement(MenuItem, {\r\n            style: UNSELECTABLE_STYLE,\r\n            role: \"option\",\r\n            attribute: UNSELECTABLE_ATTRIBUTE,\r\n            value: key,\r\n            key: key\r\n          }, key);\r\n          options.push(menuItem);\r\n          menuItems.push(menuItem);\r\n        }); // ref: https://github.com/ant-design/ant-design/issues/14090\r\n\r\n        if (inputValue && menuItems.every(function (option) {\r\n          return getValuePropValue(option) !== inputValue;\r\n        })) {\r\n          options.unshift(React.createElement(MenuItem, {\r\n            style: UNSELECTABLE_STYLE,\r\n            role: \"option\",\r\n            attribute: UNSELECTABLE_ATTRIBUTE,\r\n            value: inputValue,\r\n            key: inputValue\r\n          }, inputValue));\r\n        }\r\n      }\r\n\r\n      if (!options.length && notFoundContent) {\r\n        empty = true;\r\n        options = [React.createElement(MenuItem, {\r\n          style: UNSELECTABLE_STYLE,\r\n          attribute: UNSELECTABLE_ATTRIBUTE,\r\n          disabled: true,\r\n          role: \"option\",\r\n          value: \"NOT_FOUND\",\r\n          key: \"NOT_FOUND\"\r\n        }, notFoundContent)];\r\n      }\r\n\r\n      return {\r\n        empty: empty,\r\n        options: options\r\n      };\r\n    };\r\n\r\n    _this.renderFilterOptionsFromChildren = function (children, childrenKeys, menuItems) {\r\n      var sel = [];\r\n      var props = _this.props;\r\n      var inputValue = _this.state.inputValue;\r\n      var tags = props.tags;\r\n      React.Children.forEach(children, function (child) {\r\n        if (!child) {\r\n          return;\r\n        }\r\n\r\n        var type = child.type;\r\n\r\n        if (type.isSelectOptGroup) {\r\n          var label = child.props.label;\r\n          var key = child.key;\r\n\r\n          if (!key && typeof label === 'string') {\r\n            key = label;\r\n          } else if (!label && key) {\r\n            label = key;\r\n          } // Match option group label\r\n\r\n\r\n          if (inputValue && _this.filterOption(inputValue, child)) {\r\n            var innerItems = childrenToArray(child.props.children).map(function (subChild) {\r\n              var childValueSub = getValuePropValue(subChild) || subChild.key;\r\n              return React.createElement(MenuItem, _extends({\r\n                key: childValueSub,\r\n                value: childValueSub\r\n              }, subChild.props));\r\n            });\r\n            sel.push(React.createElement(MenuItemGroup, {\r\n              key: key,\r\n              title: label\r\n            }, innerItems)); // Not match\r\n          } else {\r\n            var _innerItems = _this.renderFilterOptionsFromChildren(child.props.children, childrenKeys, menuItems);\r\n\r\n            if (_innerItems.length) {\r\n              sel.push(React.createElement(MenuItemGroup, {\r\n                key: key,\r\n                title: label\r\n              }, _innerItems));\r\n            }\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        warning(type.isSelectOption, 'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' + \"instead of `\".concat(type.name || type.displayName || child.type, \"`.\"));\r\n        var childValue = getValuePropValue(child);\r\n        validateOptionValue(childValue, _this.props);\r\n\r\n        if (_this.filterOption(inputValue, child)) {\r\n          var menuItem = React.createElement(MenuItem, _extends({\r\n            style: UNSELECTABLE_STYLE,\r\n            attribute: UNSELECTABLE_ATTRIBUTE,\r\n            value: childValue,\r\n            key: childValue,\r\n            role: \"option\"\r\n          }, child.props));\r\n          sel.push(menuItem);\r\n          menuItems.push(menuItem);\r\n        }\r\n\r\n        if (tags) {\r\n          childrenKeys.push(childValue);\r\n        }\r\n      });\r\n      return sel;\r\n    };\r\n\r\n    _this.renderTopControlNode = function () {\r\n      var _this$state = _this.state,\r\n          open = _this$state.open,\r\n          inputValue = _this$state.inputValue;\r\n      var value = _this.state.value;\r\n      var props = _this.props;\r\n      var choiceTransitionName = props.choiceTransitionName,\r\n          prefixCls = props.prefixCls,\r\n          maxTagTextLength = props.maxTagTextLength,\r\n          maxTagCount = props.maxTagCount,\r\n          showSearch = props.showSearch,\r\n          removeIcon = props.removeIcon;\r\n      var maxTagPlaceholder = props.maxTagPlaceholder;\r\n      var className = \"\".concat(prefixCls, \"-selection__rendered\"); // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\r\n\r\n      var innerNode = null;\r\n\r\n      if (isSingleMode(props)) {\r\n        var selectedValue = null;\r\n\r\n        if (value.length) {\r\n          var showSelectedValue = false;\r\n          var opacity = 1;\r\n\r\n          if (!showSearch) {\r\n            showSelectedValue = true;\r\n          } else if (open) {\r\n            showSelectedValue = !inputValue;\r\n\r\n            if (showSelectedValue) {\r\n              opacity = 0.4;\r\n            }\r\n          } else {\r\n            showSelectedValue = true;\r\n          }\r\n\r\n          var singleValue = value[0];\r\n\r\n          var _this$getOptionInfoBy3 = _this.getOptionInfoBySingleValue(singleValue),\r\n              label = _this$getOptionInfoBy3.label,\r\n              title = _this$getOptionInfoBy3.title;\r\n\r\n          selectedValue = React.createElement(\"div\", {\r\n            key: \"value\",\r\n            className: \"\".concat(prefixCls, \"-selection-selected-value\"),\r\n            title: toTitle(title || label),\r\n            style: {\r\n              display: showSelectedValue ? 'block' : 'none',\r\n              opacity: opacity\r\n            }\r\n          }, label);\r\n        }\r\n\r\n        if (!showSearch) {\r\n          innerNode = [selectedValue];\r\n        } else {\r\n          innerNode = [selectedValue, React.createElement(\"div\", {\r\n            className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\r\n            key: \"input\",\r\n            style: {\r\n              display: open ? 'block' : 'none'\r\n            }\r\n          }, _this.getInputElement())];\r\n        }\r\n      } else {\r\n        var selectedValueNodes = [];\r\n        var limitedCountValue = value;\r\n        var maxTagPlaceholderEl;\r\n\r\n        if (maxTagCount !== undefined && value.length > maxTagCount) {\r\n          limitedCountValue = limitedCountValue.slice(0, maxTagCount);\r\n\r\n          var omittedValues = _this.getVLForOnChange(value.slice(maxTagCount, value.length));\r\n\r\n          var content = \"+ \".concat(value.length - maxTagCount, \" ...\");\r\n\r\n          if (maxTagPlaceholder) {\r\n            content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\r\n          }\r\n\r\n          maxTagPlaceholderEl = React.createElement(\"li\", _extends({\r\n            style: UNSELECTABLE_STYLE\r\n          }, UNSELECTABLE_ATTRIBUTE, {\r\n            role: \"presentation\",\r\n            onMouseDown: preventDefaultEvent,\r\n            className: \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\"),\r\n            key: \"maxTagPlaceholder\",\r\n            title: toTitle(content)\r\n          }), React.createElement(\"div\", {\r\n            className: \"\".concat(prefixCls, \"-selection__choice__content\")\r\n          }, content));\r\n        }\r\n\r\n        if (isMultipleOrTags(props)) {\r\n          selectedValueNodes = limitedCountValue.map(function (singleValue) {\r\n            var info = _this.getOptionInfoBySingleValue(singleValue);\r\n\r\n            var content = info.label;\r\n            var title = info.title || content;\r\n\r\n            if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {\r\n              content = \"\".concat(content.slice(0, maxTagTextLength), \"...\");\r\n            }\r\n\r\n            var disabled = _this.isChildDisabled(singleValue);\r\n\r\n            var choiceClassName = disabled ? \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\") : \"\".concat(prefixCls, \"-selection__choice\");\r\n            return React.createElement(\"li\", _extends({\r\n              style: UNSELECTABLE_STYLE\r\n            }, UNSELECTABLE_ATTRIBUTE, {\r\n              onMouseDown: preventDefaultEvent,\r\n              className: choiceClassName,\r\n              role: \"presentation\",\r\n              key: singleValue || SELECT_EMPTY_VALUE_KEY,\r\n              title: toTitle(title)\r\n            }), React.createElement(\"div\", {\r\n              className: \"\".concat(prefixCls, \"-selection__choice__content\")\r\n            }, content), disabled ? null : React.createElement(\"span\", {\r\n              onClick: function onClick(event) {\r\n                _this.removeSelected(singleValue, event);\r\n              },\r\n              className: \"\".concat(prefixCls, \"-selection__choice__remove\")\r\n            }, removeIcon || React.createElement(\"i\", {\r\n              className: \"\".concat(prefixCls, \"-selection__choice__remove-icon\")\r\n            }, \"\\xD7\")));\r\n          });\r\n        }\r\n\r\n        if (maxTagPlaceholderEl) {\r\n          selectedValueNodes.push(maxTagPlaceholderEl);\r\n        }\r\n\r\n        selectedValueNodes.push(React.createElement(\"li\", {\r\n          className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\r\n          key: \"__input\"\r\n        }, _this.getInputElement()));\r\n\r\n        if (isMultipleOrTags(props) && choiceTransitionName) {\r\n          innerNode = React.createElement(Animate, {\r\n            onLeave: _this.onChoiceAnimationLeave,\r\n            component: \"ul\",\r\n            transitionName: choiceTransitionName\r\n          }, selectedValueNodes);\r\n        } else {\r\n          innerNode = React.createElement(\"ul\", null, selectedValueNodes);\r\n        }\r\n      }\r\n\r\n      return React.createElement(\"div\", {\r\n        className: className,\r\n        ref: _this.saveTopCtrlRef\r\n      }, _this.getPlaceholderElement(), innerNode);\r\n    };\r\n\r\n    var optionsInfo = Select.getOptionsInfoFromProps(props);\r\n\r\n    if (props.tags && typeof props.filterOption !== 'function') {\r\n      var isDisabledExist = Object.keys(optionsInfo).some(function (key) {\r\n        return optionsInfo[key].disabled;\r\n      });\r\n      warning(!isDisabledExist, 'Please avoid setting option to disabled in tags mode since user can always type text as tag.');\r\n    }\r\n\r\n    _this.state = {\r\n      value: Select.getValueFromProps(props, true),\r\n      inputValue: props.combobox ? Select.getInputValueForCombobox(props, optionsInfo, true) : '',\r\n      open: props.defaultOpen,\r\n      optionsInfo: optionsInfo,\r\n      backfillValue: '',\r\n      // a flag for aviod redundant getOptionsInfoFromProps call\r\n      skipBuildOptionsInfo: true,\r\n      ariaId: ''\r\n    };\r\n    _this.saveInputRef = saveRef(_assertThisInitialized(_this), 'inputRef');\r\n    _this.saveInputMirrorRef = saveRef(_assertThisInitialized(_this), 'inputMirrorRef');\r\n    _this.saveTopCtrlRef = saveRef(_assertThisInitialized(_this), 'topCtrlRef');\r\n    _this.saveSelectTriggerRef = saveRef(_assertThisInitialized(_this), 'selectTriggerRef');\r\n    _this.saveRootRef = saveRef(_assertThisInitialized(_this), 'rootRef');\r\n    _this.saveSelectionRef = saveRef(_assertThisInitialized(_this), 'selectionRef');\r\n    return _this;\r\n  }\r\n\r\n  _createClass(Select, [{\r\n    key: \"componentDidMount\",\r\n    value: function componentDidMount() {\r\n      // when defaultOpen is true, we should auto focus search input\r\n      // https://github.com/ant-design/ant-design/issues/14254\r\n      if (this.props.autoFocus || this.state.open) {\r\n        this.focus();\r\n      }\r\n\r\n      this.setState({\r\n        ariaId: generateUUID()\r\n      });\r\n    }\r\n  }, {\r\n    key: \"componentDidUpdate\",\r\n    value: function componentDidUpdate() {\r\n      if (isMultipleOrTags(this.props)) {\r\n        var inputNode = this.getInputDOMNode();\r\n        var mirrorNode = this.getInputMirrorDOMNode();\r\n\r\n        if (inputNode && inputNode.value && mirrorNode) {\r\n          inputNode.style.width = '';\r\n          inputNode.style.width = \"\".concat(mirrorNode.clientWidth, \"px\");\r\n        } else if (inputNode) {\r\n          inputNode.style.width = '';\r\n        }\r\n      }\r\n\r\n      this.forcePopupAlign();\r\n    }\r\n  }, {\r\n    key: \"componentWillUnmount\",\r\n    value: function componentWillUnmount() {\r\n      this.clearFocusTime();\r\n      this.clearBlurTime();\r\n      this.clearComboboxTime();\r\n\r\n      if (this.dropdownContainer) {\r\n        ReactDOM.unmountComponentAtNode(this.dropdownContainer);\r\n        document.body.removeChild(this.dropdownContainer);\r\n        this.dropdownContainer = null;\r\n      }\r\n    }\r\n  }, {\r\n    key: \"focus\",\r\n    value: function focus() {\r\n      if (isSingleMode(this.props) && this.selectionRef) {\r\n        this.selectionRef.focus();\r\n      } else if (this.getInputDOMNode()) {\r\n        this.getInputDOMNode().focus();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"blur\",\r\n    value: function blur() {\r\n      if (isSingleMode(this.props) && this.selectionRef) {\r\n        this.selectionRef.blur();\r\n      } else if (this.getInputDOMNode()) {\r\n        this.getInputDOMNode().blur();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"renderArrow\",\r\n    value: function renderArrow(multiple) {\r\n      // showArrow : Set to true if not multiple by default but keep set value.\r\n      var _this$props4 = this.props,\r\n          _this$props4$showArro = _this$props4.showArrow,\r\n          showArrow = _this$props4$showArro === void 0 ? !multiple : _this$props4$showArro,\r\n          loading = _this$props4.loading,\r\n          inputIcon = _this$props4.inputIcon,\r\n          prefixCls = _this$props4.prefixCls;\r\n\r\n      if (!showArrow && !loading) {\r\n        return null;\r\n      } // if loading  have loading icon\r\n\r\n\r\n      var defaultIcon = loading ? React.createElement(\"i\", {\r\n        className: \"\".concat(prefixCls, \"-arrow-loading\")\r\n      }) : React.createElement(\"i\", {\r\n        className: \"\".concat(prefixCls, \"-arrow-icon\")\r\n      });\r\n      return React.createElement(\"span\", _extends({\r\n        key: \"arrow\",\r\n        className: \"\".concat(prefixCls, \"-arrow\"),\r\n        style: UNSELECTABLE_STYLE\r\n      }, UNSELECTABLE_ATTRIBUTE, {\r\n        onClick: this.onArrowClick\r\n      }), inputIcon || defaultIcon);\r\n    }\r\n  }, {\r\n    key: \"renderClear\",\r\n    value: function renderClear() {\r\n      var _this$props5 = this.props,\r\n          prefixCls = _this$props5.prefixCls,\r\n          allowClear = _this$props5.allowClear,\r\n          clearIcon = _this$props5.clearIcon;\r\n      var inputValue = this.state.inputValue;\r\n      var value = this.state.value;\r\n      var clear = React.createElement(\"span\", _extends({\r\n        key: \"clear\",\r\n        className: \"\".concat(prefixCls, \"-selection__clear\"),\r\n        onMouseDown: preventDefaultEvent,\r\n        style: UNSELECTABLE_STYLE\r\n      }, UNSELECTABLE_ATTRIBUTE, {\r\n        onClick: this.onClearSelection\r\n      }), clearIcon || React.createElement(\"i\", {\r\n        className: \"\".concat(prefixCls, \"-selection__clear-icon\")\r\n      }, \"\\xD7\"));\r\n\r\n      if (!allowClear) {\r\n        return null;\r\n      }\r\n\r\n      if (isCombobox(this.props)) {\r\n        if (inputValue) {\r\n          return clear;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      if (inputValue || value.length) {\r\n        return clear;\r\n      }\r\n\r\n      return null;\r\n    }\r\n  }, {\r\n    key: \"render\",\r\n    value: function render() {\r\n      var _rootCls;\r\n\r\n      var props = this.props;\r\n      var multiple = isMultipleOrTags(props); // Default set showArrow to true if not set (not set directly in defaultProps to handle multiple case)\r\n\r\n      var _props$showArrow = props.showArrow,\r\n          showArrow = _props$showArrow === void 0 ? true : _props$showArrow;\r\n      var state = this.state;\r\n      var className = props.className,\r\n          disabled = props.disabled,\r\n          prefixCls = props.prefixCls,\r\n          loading = props.loading;\r\n      var ctrlNode = this.renderTopControlNode();\r\n      var _this$state2 = this.state,\r\n          open = _this$state2.open,\r\n          ariaId = _this$state2.ariaId;\r\n\r\n      if (open) {\r\n        var filterOptions = this.renderFilterOptions();\r\n        this._empty = filterOptions.empty;\r\n        this._options = filterOptions.options;\r\n      }\r\n\r\n      var realOpen = this.getRealOpenState();\r\n      var empty = this._empty;\r\n      var options = this._options || [];\r\n      var dataOrAriaAttributeProps = {};\r\n      Object.keys(props).forEach(function (key) {\r\n        if (Object.prototype.hasOwnProperty.call(props, key) && (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')) {\r\n          dataOrAriaAttributeProps[key] = props[key];\r\n        }\r\n      }); // for (const key in props) {\r\n      //   if (\r\n      //     Object.prototype.hasOwnProperty.call(props, key) &&\r\n      //     (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')\r\n      //   ) {\r\n      //     dataOrAriaAttributeProps[key] = props[key];\r\n      //   }\r\n      // }\r\n\r\n      var extraSelectionProps = _extends({}, dataOrAriaAttributeProps);\r\n\r\n      if (!isMultipleOrTagsOrCombobox(props)) {\r\n        extraSelectionProps = _extends(_extends({}, extraSelectionProps), {\r\n          onKeyDown: this.onKeyDown,\r\n          tabIndex: props.disabled ? -1 : props.tabIndex\r\n        });\r\n      }\r\n\r\n      var rootCls = (_rootCls = {}, _defineProperty(_rootCls, className, !!className), _defineProperty(_rootCls, prefixCls, 1), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-focused\"), open || !!this._focused), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-combobox\"), isCombobox(props)), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-enabled\"), !disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-allow-clear\"), !!props.allowClear), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-no-arrow\"), !showArrow), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-loading\"), !!loading), _rootCls);\r\n      return React.createElement(SelectTrigger, {\r\n        onPopupFocus: this.onPopupFocus,\r\n        onMouseEnter: this.props.onMouseEnter,\r\n        onMouseLeave: this.props.onMouseLeave,\r\n        dropdownAlign: props.dropdownAlign,\r\n        dropdownClassName: props.dropdownClassName,\r\n        dropdownMatchSelectWidth: props.dropdownMatchSelectWidth,\r\n        defaultActiveFirstOption: props.defaultActiveFirstOption,\r\n        dropdownMenuStyle: props.dropdownMenuStyle,\r\n        transitionName: props.transitionName,\r\n        animation: props.animation,\r\n        prefixCls: props.prefixCls,\r\n        dropdownStyle: props.dropdownStyle,\r\n        combobox: props.combobox,\r\n        showSearch: props.showSearch,\r\n        options: options,\r\n        empty: empty,\r\n        multiple: multiple,\r\n        disabled: disabled,\r\n        visible: realOpen,\r\n        inputValue: state.inputValue,\r\n        value: state.value,\r\n        backfillValue: state.backfillValue,\r\n        firstActiveValue: props.firstActiveValue,\r\n        onDropdownVisibleChange: this.onDropdownVisibleChange,\r\n        getPopupContainer: props.getPopupContainer,\r\n        onMenuSelect: this.onMenuSelect,\r\n        onMenuDeselect: this.onMenuDeselect,\r\n        onPopupScroll: props.onPopupScroll,\r\n        showAction: props.showAction,\r\n        ref: this.saveSelectTriggerRef,\r\n        menuItemSelectedIcon: props.menuItemSelectedIcon,\r\n        dropdownRender: props.dropdownRender,\r\n        ariaId: ariaId\r\n      }, React.createElement(\"div\", {\r\n        id: props.id,\r\n        style: props.style,\r\n        ref: this.saveRootRef,\r\n        onBlur: this.onOuterBlur,\r\n        onFocus: this.onOuterFocus,\r\n        className: classnames(rootCls),\r\n        onMouseDown: this.markMouseDown,\r\n        onMouseUp: this.markMouseLeave,\r\n        onMouseOut: this.markMouseLeave\r\n      }, React.createElement(\"div\", _extends({\r\n        ref: this.saveSelectionRef,\r\n        key: \"selection\",\r\n        className: \"\".concat(prefixCls, \"-selection\\n            \").concat(prefixCls, \"-selection--\").concat(multiple ? 'multiple' : 'single'),\r\n        role: \"combobox\",\r\n        \"aria-autocomplete\": \"list\",\r\n        \"aria-haspopup\": \"true\",\r\n        \"aria-controls\": ariaId,\r\n        \"aria-expanded\": realOpen\r\n      }, extraSelectionProps), ctrlNode, this.renderClear(), this.renderArrow(!!multiple))));\r\n    }\r\n  }]);\r\n\r\n  return Select;\r\n}(React.Component);\r\n\r\nSelect.propTypes = SelectPropTypes;\r\nSelect.defaultProps = {\r\n  prefixCls: 'rc-select',\r\n  defaultOpen: false,\r\n  labelInValue: false,\r\n  defaultActiveFirstOption: true,\r\n  showSearch: true,\r\n  allowClear: false,\r\n  placeholder: '',\r\n  onChange: noop,\r\n  onFocus: noop,\r\n  onBlur: noop,\r\n  onSelect: noop,\r\n  onSearch: noop,\r\n  onDeselect: noop,\r\n  onInputKeyDown: noop,\r\n  dropdownMatchSelectWidth: true,\r\n  dropdownStyle: {},\r\n  dropdownMenuStyle: {},\r\n  optionFilterProp: 'value',\r\n  optionLabelProp: 'value',\r\n  notFoundContent: 'Not Found',\r\n  backfill: false,\r\n  showAction: ['click'],\r\n  tokenSeparators: [],\r\n  autoClearSearchValue: true,\r\n  tabIndex: 0,\r\n  dropdownRender: function dropdownRender(menu) {\r\n    return menu;\r\n  }\r\n};\r\n\r\nSelect.getDerivedStateFromProps = function (nextProps, prevState) {\r\n  var optionsInfo = prevState.skipBuildOptionsInfo ? prevState.optionsInfo : Select.getOptionsInfoFromProps(nextProps, prevState);\r\n  var newState = {\r\n    optionsInfo: optionsInfo,\r\n    skipBuildOptionsInfo: false\r\n  };\r\n\r\n  if ('open' in nextProps) {\r\n    newState.open = nextProps.open;\r\n  }\r\n\r\n  if (nextProps.disabled && prevState.open) {\r\n    newState.open = false;\r\n  }\r\n\r\n  if ('value' in nextProps) {\r\n    var value = Select.getValueFromProps(nextProps);\r\n    newState.value = value;\r\n\r\n    if (nextProps.combobox) {\r\n      newState.inputValue = Select.getInputValueForCombobox(nextProps, optionsInfo);\r\n    }\r\n  }\r\n\r\n  return newState;\r\n};\r\n\r\nSelect.getOptionsFromChildren = function (children) {\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\r\n  React.Children.forEach(children, function (child) {\r\n    if (!child) {\r\n      return;\r\n    }\r\n\r\n    var type = child.type;\r\n\r\n    if (type.isSelectOptGroup) {\r\n      Select.getOptionsFromChildren(child.props.children, options);\r\n    } else {\r\n      options.push(child);\r\n    }\r\n  });\r\n  return options;\r\n};\r\n\r\nSelect.getInputValueForCombobox = function (props, optionsInfo, useDefaultValue) {\r\n  var value = [];\r\n\r\n  if ('value' in props && !useDefaultValue) {\r\n    value = toArray(props.value);\r\n  }\r\n\r\n  if ('defaultValue' in props && useDefaultValue) {\r\n    value = toArray(props.defaultValue);\r\n  }\r\n\r\n  if (value.length) {\r\n    value = value[0];\r\n  } else {\r\n    return '';\r\n  }\r\n\r\n  var label = value;\r\n\r\n  if (props.labelInValue) {\r\n    label = value.label;\r\n  } else if (optionsInfo[getMapKey(value)]) {\r\n    label = optionsInfo[getMapKey(value)].label;\r\n  }\r\n\r\n  if (label === undefined) {\r\n    label = '';\r\n  }\r\n\r\n  return label;\r\n};\r\n\r\nSelect.getLabelFromOption = function (props, option) {\r\n  return getPropValue(option, props.optionLabelProp);\r\n};\r\n\r\nSelect.getOptionsInfoFromProps = function (props, preState) {\r\n  var options = Select.getOptionsFromChildren(props.children);\r\n  var optionsInfo = {};\r\n  options.forEach(function (option) {\r\n    var singleValue = getValuePropValue(option);\r\n    optionsInfo[getMapKey(singleValue)] = {\r\n      option: option,\r\n      value: singleValue,\r\n      label: Select.getLabelFromOption(props, option),\r\n      title: option.props.title,\r\n      disabled: option.props.disabled\r\n    };\r\n  });\r\n\r\n  if (preState) {\r\n    // keep option info in pre state value.\r\n    var oldOptionsInfo = preState.optionsInfo;\r\n    var value = preState.value;\r\n\r\n    if (value) {\r\n      value.forEach(function (v) {\r\n        var key = getMapKey(v);\r\n\r\n        if (!optionsInfo[key] && oldOptionsInfo[key] !== undefined) {\r\n          optionsInfo[key] = oldOptionsInfo[key];\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  return optionsInfo;\r\n};\r\n\r\nSelect.getValueFromProps = function (props, useDefaultValue) {\r\n  var value = [];\r\n\r\n  if ('value' in props && !useDefaultValue) {\r\n    value = toArray(props.value);\r\n  }\r\n\r\n  if ('defaultValue' in props && useDefaultValue) {\r\n    value = toArray(props.defaultValue);\r\n  }\r\n\r\n  if (props.labelInValue) {\r\n    value = value.map(function (v) {\r\n      return v.key;\r\n    });\r\n  }\r\n\r\n  return value;\r\n};\r\n\r\nSelect.displayName = 'Select';\r\npolyfill(Select);\r\nexport default Select;"]},"metadata":{},"sourceType":"module"}